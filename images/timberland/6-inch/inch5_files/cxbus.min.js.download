/*!
 * cxbus
 * @version: 2.0.4
 * @license: Genesys Telecom Labs
 */
!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("cxbus",[],n):"object"==typeof exports?exports.cxbus=n():e.cxbus=n()}(window,(function(){return function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){var o;void 0===(o=function(){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var i=t(1).Promise,a=he(),s="color:red;font-weight:bold",u="color:white;background:#6495ed",c="color:#555;font-style:italic",l="color:#6495ed;font-weight:bold",f=!1,d=!1,m=[],p={},b={},g={},h={},y={},v={},w={},x={},D={},C=[],I=window.Genesys&&window.Genesys.q&&A(window.Genesys.q,M)?window.Genesys.q:[],j=!1,N=!0,P=!1,T=!1,k="plugin.min.js",_={},E=!0,B=!1,S="*",M="array",L=function(){},O={last:null,value:null},X="Plugin does not exist and no plugins path is configured";function G(e){if(A(e=function(e){var n={};for(var t in e)n[t.toLowerCase()]=e[t];return n}(e),"object")){if(A(e.debug,"boolean")&&(j=e.debug),A(e.queue,M)&&e.debug,A(e.async,"boolean")&&(E=e.async),A(e.log,"boolean")&&(N=e.log),A(e.logstore,"boolean")&&(P=e.logstore),A(e.loadplugins,"boolean")&&e.loadplugins,A(e.pluginspath,"string")&&(T=function(e){if(e&&"/"!=e[e.length-1])return e+"/";return e}(e.pluginspath)),A(e.pluginfilenameformat,"string")&&(k=e.pluginfilenameformat),A(e.pluginmap,"object")&&(_=e.pluginmap),A(e.childDomain,"string")&&(S=e.childDomain),A(e.childmode,"boolean")&&1==e.childmode)B=e.childmode,d=!0,(window.opener||window.parent).postMessage({type:"CXBus.childCallout",registry:Object.keys(b),busID:a},"*");re("%cGenesys configuration changed",u)}}function A(e,n){return n===M?!!Array.isArray(e):r(e)==n}function R(e,n,t){return oe(e,(function(o,i){var c,d;f&&!b[e]&&void 0===n?Ne({type:"CXBus.remoteExecution",subType:"registerPlugin",busID:a,pluginName:e}).then((function(e){"pass"===e.resolution?R(e.pluginName,!0).then((function(e){o(e)})):"fail"===e.resolution&&R(e.pluginName,!1).then((function(e){i(e)}))})):!f||f&&!b[e]&&!0===n?"string"!=r(e)||b[e]?b[e]&&i("%cCan't register plugin "+ie(e)+" -- Name is already taken",s,l,s):(b[e]={name:e,namespace:e,interface:W(e),events:{},commands:{},data:{},buffer:[],ready:!1,busID:t||a},h[e]={events:[],commands:[]},b[e]==a&&re("%c New Plugin Registered "+ie(" "+e),u,l),c=b[e],(d=c.interface).registerCommand("COMMANDS",(function(e){$(c,"Commands"),e.resolve()})),d.registerCommand("EVENTS",(function(e){$(c,"Events"),e.resolve()})),d.registerCommand("LOAD",(function(e){e.resolve()})),b[e].interface.initData=v[e]||{},o(b[e].interface),v[e]&&delete v[e]):f&&!1===n&&i("%cCan't register plugin "+ie(e)+" -- Name is already taken",s,l,s)}))}function q(e,n){return oe(e,(function(t,o){if(function(e){for(var n in e.split(".").length>1&&(e=e.split(".")[0]),b)if(n.toLowerCase()==e.toLowerCase())return!0;return!1}(e)||function(e){return w[e]}(e))re("%cCan't load plugin ("+ie(e)+") -- This plugin is already loaded or an unexpected error occurred.",s,l,s),o();else{var i=k.replace("plugin",e).toLowerCase(),a=_[e]||_[e.toLowerCase()],c=function(n){!function(e){w[e]=!0}(e),t(n)},f=function(){o("Could not load plugin file: "+i)};v[e]=n||{},re("%cLoading plugin: "+(a||i),l),"string"==r(a)&&""!==a&&a.match(".js$")?Q(a,c,f):"string"!=r(a)||""===a||a.match(".js$")?!1===a?(re("%cNotice: "+i+" was prevented from loading by the current plugin mapping configuration.",u),o()):Q(T+i,c,f):(re("%cError: ("+a+") is not recognized as a javascript file. Please map plugins to javascript files only.",s),o())}}))}function F(e){return oe("loadFile",(function(n,t){if(function(e){return x[e]}(e))re("%cCan't load file ("+e+") -- This file was already loaded",s,l,s),t();else{re("%cLoading file: "+e,l),Q(e,(function(t){!function(e){x[e]=!0}(e),n(t)}),(function(){t("Could not load file: "+e)}))}}))}function J(e,n){return oe("loadJSON",(function(n,t){var o=new XMLHttpRequest;o.overrideMimeType("application/json"),o.open("GET",e,!0),o.onreadystatechange=function(){4==o.readyState&&"200"==o.status?o.responseText&&n(o.responseText):"200"!=o.status&&0!=o.status&&t("loadJSON failed with status code: "+o.status)},o.send(null)}))}function Y(e){return oe("loadModule",(function(n,t){if(e&&D[e])setTimeout((function(){n(D[e])}),0);else{Q(T+e+".mod.js",(function(t){n(D[e])}),(function(){t("Could not load module: "+e)}))}}))}function Q(e,n,t){if(!e)return!1;var o=document.createElement("script");return o.type="text/javascript",o.onload=n,o.onerror=t,o.src=e,o.charset="UTF-8",document.head.appendChild(o),!0}function V(e,n){b[e].ready=!0,function(e){var n=b[e].buffer||[],t=0;for(t=0;t<n.length;t++)!function(e){var n=U(e.command);re(ie(e.commander)+" called the command: "+ie(e.command),l,c,l),n&&ae((function(){n(e)}))}(n[t]);b[e].buffer=[]}(e),Z(e,"ready",n||{},!0)}function W(e){var n=function(){try{j&&console.log&&console.log.apply(this,arguments)}catch(e){}};return n.info=function(){try{j&&console.info&&console.info.apply(this,arguments)}catch(e){}},n.warn=function(){try{j&&console.warn&&console.warn.apply(this,arguments)}catch(e){}},n.error=function(){try{j&&console.error&&console.error.apply(this,arguments)}catch(e){}},{publish:function(n,t){return Z(e,n,t)},publishDirect:function(n,t){return Z(e,n,t,!1,!0)},republish:function(n,t){return Z(e,n,t,!0)},subscribe:function(n,t){return ne(e,n,t)},unsubscribe:function(n){return function(e,n){if(H(e)&&g[n]&&g[n].subscribers){for(var t=[],o=0;o<g[n].subscribers.length;o++)g[n].subscribers[o].subscriber!=e&&t.push(g[n].subscribers[o]);return t.length>0?g[n].subscribers=t:delete g[n],re(ie(e)+" unsubscribed from "+ie(n),l,c,l),!0}return!1}(e,n)},command:function(n,t){return te({commander:e,command:n,data:t})},before:function(e,n){return o=n,!!z(t=e)&&(y[t]||(y[t]=[]),y[t].push(o),!0);var t,o},registerCommand:function(n,t){return K(e,n,t)},registerEvents:function(n){!function(e,n){var t=H(e);A(n=n||[],"string")&&(n=[n]);if(t&&n.length>0){for(var o=0;o<n.length;o++)t.events[n[o]]||(t.events[n[o]]=!0,h[e].events.push(n[o]));return re(ie(e)+" registered the events: %c"+n.join(", "),l,c,l),!0}}(e,n)},namespace:function(){return e+""},subscribers:function(){return function(e){var n={};for(var t in g)if(t.match(e)){n[t]||(n[t]=[]);for(var o=0;o<g[t].subscribers.length;o++)n[t].push(g[t].subscribers[o].subscriber)}return n}(e)},data:function(n,t){return function(e,n,t){return function(e,n,t){if(null!=t){var o;b[e].data[n]?o=b[e].data[n].value:b[e].data[n]=O;r(o);var i=r(t),a={};a.last=o,a.value=t,a.time=(new Date).getTime();var s="data."+n;o!=t&&(Z(e,"data",b[e].data),Z(e,s,a),Z(e,"string"==i?s+":'"+a.value+"'":s+":"+a.value,a,!1,!0)),b[e].data[n]=a}}(e,n,t),function(e,n){if(b[e].data[n])return b[e].data[n].value;if(e&&!n&&b[e])return b[e].data||{};var t=z(n),o=b[t];if(n=n.replace(t+".",""),o&&o.data[n])return o.data[n].value;return}(e,n)}(e,n,t)},registry:function(){return h},initData:{},log:n,ready:function(){return V(e)}}}function $(e,n){for(var t in re("%cList of "+n+" for: "+ie(e.namespace),u,l),e[n.toLowerCase()])re("%c"+t,u)}function z(e){return e.split(".")[0]}function H(e){return b[e]||b[z(e)]||!1}function U(e){var n=e.split(".")||[],t=!1;return 2==n.length&&(t=H(n[0]))&&t.commands[n[1]]||!1}function K(e,n,t){var o=H(e);return!!o&&(o.commands[n]||h[e].commands.push(n),o.commands[n]=t,o.busID==a&&re(ie(e)+" registered the command: "+ie(n),l,c,l),f&&ve({id:a,childID:a,busID:a,type:"CXBus.remoteExecution",subType:"registerCommand",namespace:e,commandName:n}),!0)}function Z(e,n,t,o,r,i){var s=se([e,n]),u=ie(e)+" published: "+ie(n);if(t=t||{},!0===o&&(g[s]?(g[s].republish=!0,g[s].data=t):g[s]={subscribers:[],republish:!0,data:t}),r||i||re(u,l,c,l),Pe("publish",s,g[s]),g[s]){r&&!i&&re(u,l,c,l);for(var f=g[s].subscribers,d=0;d<f.length;d++)ae(f[d].callback,{time:(new Date).getTime(),publisher:e,event:s,data:t||{}})}return i||we("publish",{busID:a,childID:a,event:s,eventName:n,publisher:e,republish:o,direct:r,data:t}),!0}function ee(e,n,t,o){re(ie(n)+" republished: "+ie(e),l,c,l),ae(t,{time:(new Date).getTime(),publisher:n,event:e,data:o})}function ne(e,n,t){var o=H(e),r=H(n);return!(!t||!o)&&(g[n]||(g[n]={subscribers:[],republish:!1}),g[n].subscribers.push({subscriber:e,callback:t}),re(ie(e)+" subscribed to "+ie(n),l,c,l),!0===g[n].republish&&r&&ee(n,r.namespace,t,g[n].data||{}),we("subscribe",{busID:a,childID:a,eventName:n,subscriber:e}),n)}function te(e){var n=e.commander,t=e.command,o=e.data,i=e.resolveBuff,u=e.rejectBuff,d=e.buffered;Pe("Command: "+t),o=o||{},t&&1===t.split(".").length&&(t=se([n,t])),d||(o=function(e,n){for(var t=y[e]||[],o=0;o<t.length;o++)"object"==r(n)&&!1!==n&&null!=n&&(n=t[o](n));return n}(t,o));var m=U(t),p=z(t),g=b[p];if(f&&!g)return Pe("Plugin not found locally. Checking with my parent..."),Ne({type:"CXBus.remoteExecution",subType:"command",busID:a,pluginName:p,commandName:t,commander:n,data:o});if(!f&&!g)return Pe("Plugin not found anywhere by parent. Returning error..."),e.message?(e.message.resolution="fail",e.message.resolutionData=X,Ne(e.message)):oe(t,(function(e,n){n("Plugin does not exist")}));if(!f&&g&&g.busID!=a&&e.message)return Pe("Parent found the plugin on a child node. Redirecting...."),e.message.targetID=g.busID,Ne(e.message);if(!f&&g&&g.busID!=a&&!e.message)return Pe("Parent found the plugin on a child node. Redirecting...."),Ne({type:"CXBus.remoteExecution",subType:"command",busID:a,pluginName:p,commandName:t,commander:n,data:o,targetID:g.busID});if(g&&g.busID==a){var h=oe(t,(function(f,d){var h={time:(new Date).getTime(),commander:n,command:t,resolve:i||f,reject:u||d,data:o||{}};"object"==r(o)&&!1!==o&&null!=o?g&&g.busID==a?(Pe("Plugin was found locally on this node. Attempting to execute command now..."),re(ie(n)+" called the command: "+ie(t),l,c,l),g.ready||p==n?m?m(h):(e.message&&(e.message.resolution="fail",e.message.resolutionData="Command does not exist"),h.reject("Command does not exist")):g.ready||(re("%c"+ie(p)+" has not been loaded yet or it has not called its ready() method. Your command call ("+t+") has been buffered and will be executed once the plugin has loaded and/or called its ready() method.",s,s,s),function(e,n){b[e].buffer.push(n)}(p,h))):!g&&T?q(p).done((function(){te({commander:n,command:t,data:o,resolveBuff:h.resolve,rejectBuff:h.reject,buffered:!0})})).fail((function(){e.message.resolution="fail",e.message.resolutionData="Could not load plugin file in given location. Check your plugins path option.",h.reject("Could not load plugin file in given location. Check your plugins path option.")})):g||T||(e.message.resolution="fail",e.message.resolutionData=X,h.reject(X)):(e.message.resolution="fail",e.message.resolutionData="Command was cancelled by a 'before' function.",h.reject("Command was cancelled by a 'before' function.")),e.message&&"fail"==e.message.resolution&&Ne(e.message)}));return e.message&&h.then((function(n){e.message.resolution="pass",e.message.resolutionData=n,Ne(e.message)})).catch((function(n){e.message.resolution="fail",e.message.resolutionData=n,Ne(e.message)})),h}}function oe(e,n){var t=new i(n);return t.catch((function(n){re("%cError ("+ie(e)+"): ",s,s,s),console.error&&console.error(n)})),t}function re(e,n,t,o,i,a){try{N&&(P&&C.push(e+""),j&&console&&console.log&&"string"==r(e)&&("%c"==e.substr(e.length-2,2)&&(e=e.substr(0,e.length-2)),console.log.apply(this,arguments)))}catch(e){Pe("logging error!")}}function ie(e){return"%c"+e+"%c"}function ae(e,n,t,o){E||o?setTimeout((function(){e(n)}),t||0):e(n)}function se(e){return e.join(".")}function ue(){if(d)I.push(arguments);else{var e=arguments,n=e[0]||"";if("registerPlugin"==n)R(e[1]).then(e[2]||L,e[3]||L);else if("command"==n)te({commander:"Genesys",command:e[1],data:e[2]||{}}).then(e[3]||L,e[4]||L);else if("subscribe"==n&&"string"==r(e[1])&&"function"==r(e[2]))ne("Genesys",e[1],e[2]);else if("registerChild"==n)me(e[1]);else if("executeQueue"==n)ce();else if("loadPlugin"==n)q(e[1],e[2]).then(e[3]||L,e[4]||L);else if("loadFile"==n)F(e[1]).then(e[2]||L,e[3]||L);else if("loadModule"==n)Y(e[1]).then(e[2]||L,e[3]||L);else if("loadJSON"==n)J(e[1]).then(e[2]||L,e[3]||L);else{if("configure"!=n)return!1;G(e[1]||{})}}return!0}function ce(e){if(I){re("%cExecuting "+I.length+" items from the queue...",u);for(var n=0;n<I.length;n++)ue.apply(this,I[n])}}if(window.Genesys)for(var le=Object.keys(window.Genesys),fe=0;fe<le.length;fe++)ue[le[fe]]=window.Genesys[le[fe]];window.Genesys=ue,R("Genesys"),"function"==r(t(3))&&t(4)&&(void 0===(o=function(){return window.Genesys}.apply(n,[]))||(e.exports=o));var de={};function me(e){return!!e&&(e.contentWindow&&(e=e.contentWindow),de[id]={id:id,busID:void 0,intvl:setInterval((function(){pe(e,id)}),500),callAttempts:0,registered:!1,window:e,registry:[]},pe(e,id),!0)}function pe(e,n){e.postMessage({type:"CXBus.parentCallout",childID:n,busID:a},S),de[n].callAttempts++}function be(e,n,t){de[n]&&!de[n].registered?(clearInterval(de[n].intvl),de[n].registered=(new Date).getTime(),de[n].registry=t,de[n].busID=busID):(de[n]={id:n,busID:n,intvl:!1,callAttempts:0,registered:(new Date).getTime(),window:e,registry:t},e.postMessage({type:"CXBus.parentCallback",busID:n},S))}function ge(e,n,t){d=!1,f=e,ce()}function he(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=16*Math.random()|0;return("x"==e?n:3&n|8).toString(16)}))}function ye(e,n){de[e]&&(n=n||{},de[e].window.postMessage(n,S))}function ve(e){f&&f.postMessage(e,"*")}function we(e,n){if((n=n||{}).subType=e,n.type="CXBus.broadcast",f)ve(n);else for(var t in de)ye(t,n)}var xe,De,Ce=document.getElementById("genesys-cxbus"),Ie={},je={src:0,charset:0,id:0,type:0,queue:0,pluginmap:0};if(Ce){for(fe=0;fe<Ce.attributes.length;fe++)xe=Ce.attributes[fe].nodeName.toLowerCase(),"true"===(De=Ce.attributes[fe].nodeValue)&&(De=!0),"false"===De&&(De=!1),je[xe]||(Ie[xe]=De);G(Ie)}function Ne(e){var n;if(e.id)n=e.id;else{for(n=he();p[n];)n=he();e.id=n}return oe("remoteExecution",(function(t,o){p[n]={success:t,fail:o},!f&&e.resolution?(Pe("--\x3e to origin"),ye(e.busID,e)):!f&&e.targetID?(Pe("--\x3e to target child"),ye(e.targetID,e)):e.id!=a&&(Pe("--\x3e to parent"),ve(e))}))}function Pe(){var e=Array.prototype.slice.call(arguments);e.unshift("["+window.name+"]")}window.addEventListener("message",(function(e){m.push(e),function(){for(;m.length>0;){var e=m.shift(),n=e.data,t=p[n.id];switch(n.type){case"CXBus.parentCallout":B&&ge(e.source,n.busID,n.parentRegistry);break;case"CXBus.childCallout":B||be(e.source,n.busID,n.registry);break;case"CXBus.parentCallback":B&&ge(e.source,n.busID,n.parentRegistry);break;case"CXBus.childCallback":B||be(e.source,n.busID,n.registry);break;case"CXBus.broadcast":switch(f||we(n),n.subType){case"subscribe":if(void 0===n.eventData&&g[n.eventName]&&!0===g[n.eventName].republish){var o=H(n.eventName);n.eventNamespace=o?o.namespace:"",n.eventData=g[n.eventName].data||{},n.subType="republish",ye(n.busID,n)}break;case"publish":Z(n.publisher,n.eventName,n.data,n.republished,n.direct,!0);break;case"republish":for(var r=null,i=0;i<g[n.eventName].subscribers.length;i++)g[n.eventName].subscribers[i].subscriber==n.subscriber&&(r=g[n.eventName].subscribers[i].callback);r&&ee(n.eventName,n.eventNamespace,r,n.eventData||{})}break;case"CXBus.remoteExecution":switch(n.subType){case"registerPlugin":f||(H(n.pluginName)?(n.resolution="fail",ye(n.busID,n)):(n.resolution="pass",ye(n.busID,n),R(n.pluginName,!0,n.busID))),t&&n.resolution&&("pass"==n.resolution?t.success(n):"fail"==n.resolution&&t.fail(n));break;case"registerCommand":f||K(n.namespace,n.commandName,L);break;case"command":var s=p[n.id],u=z(n.commandName),c=b[u];if(n.resolution)n.resolution&&s&&("pass"==n.resolution?s.success(n.resolutionData):"fail"==n.resolution&&s.fail(n.resolutionData),f||n.busID==a||Ne(n),delete p[n.id]);else if(!f&&c&&c.busID&&c.busID!=a)n.targetID=c.busID,Ne(n);else if(c&&c.busID&&c.busID==a)te({commander:n.commander,command:n.commandName,data:n.data,message:n});else if(!f&&!c)return n.resolution="fail",n.resolutionData=X,Ne(n)}}}}()}),!1),window.reg=function(){return{busID:a,oParentBus:f,bPendingParent:d,aMessageQueue:m,oChildRegistry:de,oPlugins:b,oSubscriptions:g,oRegistry:h,oBefore:y,oLoadedPlugins:w,oLoadedFiles:x,oLoadedModules:D}}}()}.apply(n,[]))||(e.exports=o)},function(e,n,t){(function(o){var r;!function(o){var i=o.Promise,a=i&&"resolve"in i&&"reject"in i&&"all"in i&&"race"in i&&function(){var e;return new i((function(n){e=n})),"function"==typeof e}();n?(n.Promise=a?i:D,n.Polyfill=D):void 0===(r=function(){return a?i:D}.call(n,t,n,e))||(e.exports=r);var s=function(){};function u(e){return"[object Array]"===Object.prototype.toString.call(e)}var c,l="undefined"!=typeof setImmediate?setImmediate:setTimeout,f=[];function d(){for(var e=0;e<f.length;e++)f[e][0](f[e][1]);f=[],c=!1}function m(e,n){f.push([e,n]),c||(c=!0,l(d,0))}function p(e){var n=e.owner,t=n.state_,o=n.data_,r=e[t],i=e.then;if("function"==typeof r){t="fulfilled";try{o=r(o)}catch(e){y(i,e)}}b(i,o)||("fulfilled"===t&&g(i,o),"rejected"===t&&y(i,o))}function b(e,n){var t;try{if(e===n)throw new TypeError("A promises callback cannot return that same promise.");if(n&&("function"==typeof n||"object"==typeof n)){var o=n.then;if("function"==typeof o)return o.call(n,(function(o){t||(t=!0,n!==o?g(e,o):h(e,o))}),(function(n){t||(t=!0,y(e,n))})),!0}}catch(n){return t||y(e,n),!0}return!1}function g(e,n){e!==n&&b(e,n)||h(e,n)}function h(e,n){"pending"===e.state_&&(e.state_="sealed",e.data_=n,m(w,e))}function y(e,n){"pending"===e.state_&&(e.state_="sealed",e.data_=n,m(x,e))}function v(e){var n=e.then_;e.then_=void 0;for(var t=0;t<n.length;t++)p(n[t])}function w(e){e.state_="fulfilled",v(e)}function x(e){e.state_="rejected",v(e)}function D(e){if("function"!=typeof e)throw new TypeError("Promise constructor takes a function argument");if(this instanceof D==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(e,n){function t(e){y(n,e)}try{e((function(e){g(n,e)}),t)}catch(e){t(e)}}(e,this)}D.prototype={constructor:D,state_:"pending",then_:null,data_:void 0,then:function(e,n){var t={owner:this,then:new this.constructor(s),fulfilled:e,rejected:n};return"fulfilled"===this.state_||"rejected"===this.state_?m(p,t):this.then_.push(t),t.then},catch:function(e){return this.then(null,e)}},D.all=function(e){if(!u(e))throw new TypeError("You must pass an array to Promise.all().");return new this((function(n,t){var o=[],r=0;function i(e){return r++,function(t){o[e]=t,--r||n(o)}}for(var a,s=0;s<e.length;s++)(a=e[s])&&"function"==typeof a.then?a.then(i(s),t):o[s]=a;r||n(o)}))},D.race=function(e){if(!u(e))throw new TypeError("You must pass an array to Promise.race().");return new this((function(n,t){for(var o,r=0;r<e.length;r++)(o=e[r])&&"function"==typeof o.then?o.then(n,t):n(o)}))},D.resolve=function(e){return e&&"object"==typeof e&&e.constructor===this?e:new this((function(n){n(e)}))},D.reject=function(e){return new this((function(n,t){t(e)}))}}("undefined"!=typeof window?window:void 0!==o?o:"undefined"!=typeof self?self:this)}).call(this,t(2))},function(e,n){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(e){"object"==typeof window&&(t=window)}e.exports=t},function(e,n){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,n){(function(n){e.exports=n}).call(this,{})}])}));