define(["jquery","pubsub","shared.main.screen"],function(c,n,e){var a;return(a={defaults:{dataAttr:"search-button-options",accordion:".topnav-accordion",searchButton:".topnav-searchbutton",searchButtonIcon:".topnav-searchbutton span",searchContainer:".topnav-search-container",searchInput:".topnav-search-input",searchForm:".topnav-search-form",searchSubmitButton:".topnav-search-button",searchSubmitButtonIcon:".icon-search",searchResultsCloseBtn:"autosuggest-overlay-close"},init:function(){var n=this;return n.deferred=c.Deferred(),n.$element=c(n.defaults.searchButton),n.metadata=n.$element.data(n.defaults.dataAttr),n.config=c.extend({},n.defaults,n.metadata),n.config.$accordion=c(n.config.accordion),n.config.$searchButton=c(n.config.searchButton),n.config.$searchButtonLink=n.config.$searchButton.find("a"),n.config.$searchButtonAriaOpen=c(n.config.$searchButtonLink).attr("aria-label"),n.config.$searchButtonAriaClose=c(n.config.$searchButtonLink).data("closeAriaLabel"),n.config.$searchButtonIcon=c(n.config.searchButtonIcon),n.config.$searchContainer=c(n.config.searchContainer),n.config.$searchInput=c(n.config.searchInput),n.config.$searchForm=c(n.config.searchForm),n.config.$searchSubmitButton=c(n.config.searchSubmitButton),n.config.$searchSubmitButtonIcon=n.config.$searchSubmitButton.find(n.config.searchSubmitButtonIcon),n.config.hasMobileClearSearchButton=n.config.$searchSubmitButton.hasClass("clear-search"),n.events(),n.configureAriaTags(),n.configureSearchForm(),n.deferred.resolve(),n},events:function(){var o=this;o.config.$searchForm.on("submit",function(n){""==o.config.$searchInput.val()&&n.preventDefault()}),o.config.$searchInput.on("focus",function(){o.config.$searchForm.addClass("focus")}),o.config.$searchInput.on("blur",function(){o.config.$searchForm.removeClass("focus")}),o.config.$searchButton.on("click touch",function(n){n.preventDefault(),o.toggleSearchContainer(o.config.$searchContainer)}),c.pubsub("subscribe","window.resize.breakpoint",function(n,a){"small"!==a.now&&o.hideSearch(),o.configureAriaTags(),o.configureSearchForm()}),o.config.hasMobileClearSearchButton&&o.config.$searchSubmitButton.on("click touch",function(n){"small"===e.size()&&(n.preventDefault(),o.config.$searchInput.val(""))})},configureAriaTags:function(){"small"!==e.size()?this.config.$searchContainer.removeAttr("aria-labelledby"):this.config.$searchContainer.attr({"aria-labelledby":"topnav-search-button"})},configureSearchForm:function(){var n=this;"small"===e.size()&&n.config.hasMobileClearSearchButton?(n.config.$searchSubmitButton.addClass("search-clear-button"),n.config.$searchSubmitButtonIcon.addClass("icon-close"),n.config.$searchSubmitButtonIcon.removeClass("icon-search")):(n.config.$searchSubmitButton.removeClass("search-clear-button"),n.config.$searchSubmitButtonIcon.removeClass("icon-close"),n.config.$searchSubmitButtonIcon.addClass("icon-search"))},toggleSearchContainer:function(n){var a=this;"small"===e.size()&&a.config.$searchButton.hasClass("active")?a.hideSearch():a.showSearch()},hideSearch:function(){var n=this;c.pubsub("publish","vfdp.aem.topnav.search.close"),window.topnavSearchClickHandler&&c(document).off("click touch",window.topnavSearchClickHandler),n.config.$searchButton.removeClass("active"),n.config.$searchButtonLink.attr({"aria-expanded":"false","aria-label":n.config.$searchButtonAriaOpen}),n.config.$searchButtonIcon.removeClass("icon-close").addClass("icon-search"),n.config.$accordion.is(":visible")&&n.config.$accordion.hasClass("topnav-accordion-search")&&!n.config.$accordion.hasClass("scrolled")||n.config.$searchContainer.removeClass("active")},showSearch:function(){var o=this;c.pubsub("publish","vfdp.aem.topnav.search.open"),window.topnavSearchClickHandler=function(n){var a=c(n.target);a.closest(o.config.searchContainer).length||a.closest(o.config.searchButton).length||a.hasClass(o.config.searchResultsCloseBtn)||o.hideSearch()},c(document).on("click touch",window.topnavSearchClickHandler),o.config.$searchButton.on("keyup",function(n){32!=n.keyCode&&13!=n.keyCode||(n.preventDefault(),topnavSearchClickHandler(n))}),o.config.$searchContainer.addClass("active"),o.config.$searchButton.addClass("active"),o.config.$searchButtonLink.attr({"aria-expanded":"true","aria-label":o.config.$searchButtonAriaClose}),o.config.$searchButtonIcon.removeClass("icon-search").addClass("icon-close"),o.config.$searchInput.focus()}}).init(),a});
//# sourceMappingURL=../../../maps/js/cms/nav/searchButton.hash-b1777e06b8bcdf42bc892a9ad80496b3.js.map