define(["vfdp-s7-viewer.viewer.prototype"],function(i){"use strict";function e(e,t,o){s7sdk.Logger.traceLevel>=s7sdk.Logger.CONFIG&&console.log("Creating new VideoPlayer"),this.type=[s7sdk.ItemDescType.VIDEO,s7sdk.ItemDescType.VIDEO_SET],this.config=e,this.Container=t,this.params=o,this.SDKDependencies=["s7sdk.common.Button","s7sdk.common.ControlBar","s7sdk.video.VideoControls","s7sdk.video.VideoPlayer"],this.itemCache=[],this.modified=!1,i.call(this,"video.VideoPlayer","VideoPlayer")}return e.prototype={show:function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VideoPlayer.prototype.show"),this.Viewer.show(),this.ControlBar.show(),this.adjustVideoScrubberWidth(),this.setMutableVolume()},hide:function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VideoPlayer.prototype.hide"),this.Viewer.hide(),this.Viewer.getDuration()&&this.Viewer.pause(),this.ControlBar.hide()},setItemCache:function(e){e&&-1!==this.type.indexOf(e.type)&&(this.itemCache[e.name]={time:this.Viewer.getCurrentTime()})},applyItemCache:function(e){e&&this.itemCache[e.name]&&this.Viewer.seek(this.itemCache[e.name].time)},setModifier:function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VideoPlayer.prototype.setModifier",e),this.modified||(this.Viewer.setModifier(e),this.modified=!0)},resize:function(e,t){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINEST&&console.log("VideoPlayer.prototype.resize",e,t),this.adjustVideoScrubberWidth(),this.Viewer.resize(e,t)},clickClosedCaptionButton:function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VideoPlayer.prototype.clickClosedCaptionButton"),this.Viewer.setCaptionEnabled(this.closedCaptionButton.isSelected()),this.storedCaptionEnabled=this.closedCaptionButton.isSelected()},onVideoCapabilityStateChange:function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINER&&console.log("VideoPlayer.prototype.onVideoCapabilityStateChange",e);var t=e.s7event.state;t.hasCapability(s7sdk.VideoCapabilityState.PAUSE)?(this.playPauseButton.setSelected(!1),$("s7controlbar, .VideoPlayer").removeClass("videoPlaying")):(t.hasCapability(s7sdk.VideoCapabilityState.PLAY)||t.hasCapability(s7sdk.VideoCapabilityState.REPLAY))&&(this.playPauseButton.setSelected(!0),$("s7controlbar, .VideoPlayer").addClass("videoPlaying")),this.playPauseButton.enableReplay(t.hasCapability(s7sdk.VideoCapabilityState.REPLAY))},onVideoDuration:function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINEST&&console.log("VideoPlayer.prototype.onVideoDuration"),this.videoTime.setDuration(e.s7event.data),this.videoScrubber.setDuration(e.s7event.data)},onVideoLoadProgress:function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINEST&&console.log("VideoPlayer.prototype.onVideoLoadProgress"),this.videoScrubber.setLoadedPosition(e.s7event.data)},onVideoCurrentTime:function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINEST&&console.log("VideoPlayer.prototype.onVideoCurrentTime"),this.videoTime.setPlayedTime(e.s7event.data),this.videoScrubber.setPlayedTime(e.s7event.data)},onPlayPauseButtonClick:function(e){(s7sdk.Logger.traceLevel>=s7sdk.Logger.FINER&&console.log("VideoPlayer.prototype.onPlayPauseButtonClick",e),this.playPauseButton.isSelected())?this.Viewer.pause():(this.Viewer.getDuration()-this.Viewer.getCurrentTime()<=1&&this.Viewer.seek(0),this.Viewer.play())},onNotifyScrubberEvent:function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINER&&console.log("VideoPlayer.prototype.onNotifyScrubberEvent",e),this.Viewer.seek(e.s7event.position*this.Viewer.getDuration())},adjustVideoScrubberWidth:function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINER&&console.log("VideoPlayer.prototype.adjustVideoScrubberWidth"),this.videoScrubber.resize(0,this.videoScrubber.getHeight());var e=Math.floor(this.videoTime.component.obj.offsetLeft)-Math.ceil(this.playPauseButton.component.obj.offsetLeft)-this.playPauseButton.getWidth();e-=2*(this.videoScrubber.component.obj.offsetWidth+this.videoScrubber.getWidth()),this.videoTime.resize(this.videoTime.getWidth(),this.ControlBar.component.obj.clientHeight),this.videoScrubber.resize(e,this.videoScrubber.getHeight())},onMuteButtonClick:function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINER&&console.log("VideoPlayer.prototype.onMuteButtonClick",e),this.mutableVolume.isSelected()?this.Viewer.mute():(this.Viewer.unmute(),this.Viewer.setVolume(this.mutableVolume.getPosition()))},onVolumeDown:function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINER&&console.log("VideoPlayer.prototype.onVolumeDown",e),this.Viewer.unmute()},onVolumeMove:function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINER&&console.log("VideoPlayer.prototype.onVolumeMove",e),this.Viewer.muted()||this.Viewer.setVolume(e.s7event.position)},init:function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VideoPlayer.prototype.init");var t=this;this.supportsInline=this.Viewer.supportsInline(),this.supportsInline||this.ControlBar.hide(),this.ControlBar.show=function(){if(s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VideoPlayer.ControlBar.show"),t.supportsInline){this.setCSS(".s7controlbar","display","block");var e=t.config.getConfig().Viewer.VideoPlayer.ControlBar;e.fullscreen?(this.FullScreenButton.setCSS(".s7fullscreenbutton","visibility","visible"),this.FullScreenButton.activate()):(this.FullScreenButton.setCSS(".s7fullscreenbutton","visibility","hidden"),this.FullScreenButton.deactivate()),t.ControlBar.setModifier(e.modifiers)}},this.playPauseButton=new s7sdk.common.PlayPauseButton(this.ControlBar.getId(),this.params,this.ControlBar.getId()+"-playPauseButton"),this.videoScrubber=new s7sdk.video.VideoScrubber(this.ControlBar.getId()+"_inner",this.params,this.ControlBar.getId()+"-videoScrubber"),this.mutableVolume=new s7sdk.video.MutableVolume(this.ControlBar.getId()+"_inner",this.params,this.ControlBar.getId()+"-mutableVolume"),this.setMutableVolume=function(){this.mutableVolume.isSelected()!==this.Viewer.muted()&&this.mutableVolume.setSelected(this.Viewer.muted())},this.Viewer.supportsVolumeControl()||this.mutableVolume.setCSS(".s7mutablevolume","display","none"),this.closedCaptionButton=new s7sdk.common.ClosedCaptionButton(this.ControlBar.getId()+"_inner",this.params,this.ControlBar.getId()+"-closedCaptionButton"),this.closedCaptionButton.hide=function(){this.setCSS(".s7closedcaptionbutton","display","none")},this.closedCaptionButton.show=function(){this.setCSS(".s7closedcaptionbutton","display","block")},this.closedCaptionButton.hide(),this.videoTime=new s7sdk.video.VideoTime(this.ControlBar.getId()+"_inner",this.params,this.ControlBar.getId()+"-videoTime"),this.Viewer.addEventListener(s7sdk.event.CapabilityStateEvent.NOTF_VIDEO_CAPABILITY_STATE,function(e){t.onVideoCapabilityStateChange(e)},!1),this.Viewer.addEventListener(s7sdk.event.VideoEvent.NOTF_DURATION,function(e){t.onVideoDuration(e)},!1),this.Viewer.addEventListener(s7sdk.event.VideoEvent.NOTF_LOAD_PROGRESS,function(e){t.onVideoLoadProgress(e)},!1),this.Viewer.addEventListener(s7sdk.event.VideoEvent.NOTF_CURRENT_TIME,function(e){t.onVideoCurrentTime(e)},!1),this.playPauseButton.addEventListener("click",function(e){t.onPlayPauseButtonClick(e)}),this.videoScrubber.addEventListener(s7sdk.SliderEvent.NOTF_SLIDER_UP,function(e){t.onNotifyScrubberEvent(e)},!1),this.mutableVolume.addEventListener("click",function(e){t.onMuteButtonClick(e)}),this.mutableVolume.addEventListener(s7sdk.SliderEvent.NOTF_SLIDER_DOWN,function(e){t.onVolumeDown(e)},!1),this.mutableVolume.addEventListener(s7sdk.SliderEvent.NOTF_SLIDER_MOVE,function(e){t.onVolumeMove(e)},!1),this.mutableVolume.addEventListener(s7sdk.SliderEvent.NOTF_SLIDER_UP,function(e){t.onVolumeMove(e)},!1),this.closedCaptionButton.addEventListener("click",function(){t.clickClosedCaptionButton()}),this.closedCaptionButton.setSelected(t.Viewer.getCaptionEnabled())}},e});
//# sourceMappingURL=../../../../maps/js/wcs/view/vfdp-s7-viewer/videoplayer.hash-12f0eebd2260d3a1181b7e8ea34096eb.js.map