define(["jquery","pubsub","shared.main.screen"],function(t,n,o){var i;return(i={defaults:{el:".topnav-header",dataAttr:"topnav-sticky-options",topnavAccordion:".topnav-accordion",mainnav:".topnav-mainnav",search:".topnav-search-container",promobar:".topnav-promobar",promobarContainer:".topnav-promobar-container",cart:".topnav-cart a",logo:".topnav-logo",smallHeader:".topnav-smallheader-container",scroll:"160",transitionTimeoutDelay:10},init:function(){var n=this;return n.deferred=t.Deferred(),n.$element=t(n.defaults.el),n.metadata=n.$element.data(n.defaults.dataAttr),n.config=t.extend({},n.defaults,n.metadata),n.calculateStickyScrollTrigger(),n.config.$header=n.$element,n.config.$mainnav=t(n.config.mainnav),n.config.$accordion=n.config.$header.find(n.config.topnavAccordion),n.config.$smallHeader=n.config.$header.find(n.config.smallHeader),n.config.$promobar=n.config.$header.find(n.config.promobar),n.config.$promobarContainer=n.config.$header.find(n.config.promobarContainer),n.config.$search=n.config.$header.find(n.config.search),n.config.$header.hasClass("sticky-animate")&&(n.config.animate=!0),n._build(),n.events(),n.deferred.resolve(),n},events:function(){var a=this;"small"!==o.size()&&a.config.$header.hasClass("sticky-medium")&&t(window).on("scroll",a,a.toggleScrollEvents),a.bindTopnavAccordionEvents(),t.pubsub("subscribe","window.resize.breakpoint",function(n,i){if("small"===i.now)a.unbindScrollEvents();else{var e,o=t._data(window,"events").scroll;void 0!==o&&(e=t.grep(o,function(n,i){return n.data===a})),(!o||e.length<=0)&&t(window).on("scroll",a,a.toggleScrollEvents)}a.updateBodyPadding()})},bindTopnavAccordionEvents:function(){var e=this;t.pubsub("subscribe","vfdp.aem.topnav.accordion.open",function(n,i){"small"===o.size()&&e.updateBodyPadding(!0)}),t.pubsub("subscribe","vfdp.aem.topnav.accordion.close",function(n,i){"small"===o.size()&&e.updateBodyPadding()})},calculateBodyPadding:function(n,i){var e=this;return n?e.config.$smallHeader.outerHeight():e.config.$header.outerHeight()+e.config.$promobar.outerHeight()},updateBodyPadding:function(n,i){var e="";void 0===i&&(i=o.size()),this.config.$header.hasClass("sticky-"+i)&&(e=this.calculateBodyPadding(n,i)),t("body").css("padding-top",e)},calculateStickyScrollTrigger:function(){var n=this;n.defaults.scroll=n.$element.outerHeight()||n.defaults.scroll},minimizeStickyHeader:function(n){var i=this;i.config.$header.addClass("sticky-minimized"),i.config.$promobar.addClass("hide"),t.pubsub("publish","vfdp.topnav.sticky.minimized");var e=function(n){n.target==i.config.$header[0]&&(i.config.$search.removeClass("notransition fade-out"),i.config.$mainnav.removeClass("notransition fade-out"),i.config.$header[0].removeEventListener("transitionend",e),t.pubsub("publish","vfdp.topnav.sticky.transitionend.minimized"))};!n&&this.config.animate&&(i.config.$search.addClass("notransition fade-out"),i.config.$mainnav.addClass("notransition fade-out"),i.config.$header[0].addEventListener("transitionend",e))},maximizeStickyHeader:function(n){var i=this;i.config.$header.removeClass("sticky-minimized"),t.pubsub("publish","vfdp.topnav.sticky.maximized");var e=function(){i.config.$promobarContainer.removeClass("mask"),i.config.$promobar[0].removeEventListener("transitionend",e)},o=function(n){n.target==i.config.$header[0]&&(i.config.$search.removeClass("notransition fade-out"),i.config.$mainnav.removeClass("notransition fade-out"),i.config.$header[0].removeEventListener("transitionend",o),i.config.$promobarContainer.addClass("mask"),i.config.$promobar.removeClass("hide notransition"),i.config.$promobar.addClass("slide-up"),i.config.$promobar[0].addEventListener("transitionend",e),i.config.timeout=window.setTimeout(function(){i.config.$promobar.removeClass("slide-up"),window.clearTimeout(i.config.timeout)},i.config.transitionTimeoutDelay),t.pubsub("publish","vfdp.topnav.sticky.transitionend.maximized"))};!n&&this.config.animate?(i.config.$search.addClass("notransition fade-out"),i.config.$mainnav.addClass("notransition fade-out"),i.config.$header[0].addEventListener("transitionend",o)):i.config.$promobar.removeClass("hide")},toggleScrollEvents:function(n){var i=n.data;t(this).scrollTop()>=i.config.scroll?i.config.$header.hasClass("sticky-minimized")||i.minimizeStickyHeader():i.config.$header.hasClass("sticky-minimized")&&i.maximizeStickyHeader()},unbindScrollEvents:function(){this.maximizeStickyHeader(!0),t(window).off("scroll",this.toggleScrollEvents)},toggleStickyState:function(n){var i=this,e=[],o=[],a=!!n;["sticky","sticky-small","sticky-medium","sticky-large"].forEach(function(n){i.config.$header.hasClass(n)&&!a?o.push(n):e.push(n)}),t("body").removeClass(e.join(" ")).addClass(o.join(" "))},_build:function(){this.toggleStickyState(),this.updateBodyPadding()}}).init(),i});
//# sourceMappingURL=../../../maps/js/cms/nav/sticky.hash-9b42aed2395d52f8b325b386eda31da7.js.map