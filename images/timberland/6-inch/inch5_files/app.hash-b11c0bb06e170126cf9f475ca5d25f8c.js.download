define(["require","vfdp-s7-viewer.helpers","vfdp-s7-viewer.config","vfdp-s7-viewer.sdk"],function(w,v,i){"use strict";s7sdk.Util.lib.include("s7sdk.event.Event"),s7sdk.Util.lib.include("s7sdk.common.Container"),s7sdk.Util.lib.include("s7sdk.set.MediaSet"),s7sdk.Util.lib.include("s7sdk.set.Swatches"),s7sdk.Util.lib.include("s7sdk.set.SetIndicator"),s7sdk.Util.lib.include("s7sdk.common.Button"),s7sdk.Util.init();var s="VFDPS7Viewer",n=function(e,t){return e[s]instanceof n?e[s]:(this.element=e,this.options=t||{},this.eventHandelersAdded=!1,this.sdk_ready=!1,this.metadata=JSON.parse(this.element.getAttribute("data-viewer-options")),this.config=new i,this.config.setConfig(this.options,this.metadata),this.Viewer={},this.viewerContainerId="hero-image-container",this.swatchContainerId="swatches-container",this.setIndicatorContainerId="set-indicator-container",n.numInstances=(n.numInstances||0)+1,this.instanceIndex=n.numInstances-1,this.init(),(this.element[s]=this).viewerConfig=[],this.prevNextButtonsVisible=!1,this)};return n.prototype={init:function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.CONFIG&&console.log("VFDPS7Viewer.prototype.init");var e,t=this;this.currentSize=v.getScreenSize(),this.params=new s7sdk.ParameterManager,this.isCurrentAssetChangeNotCausedByHover=!0,this.element.id=this.element.id||v.getUniqueId(),this.viewerContainer=this.element.querySelectorAll("#"+this.viewerContainerId)[0],this.viewerContainer.id=this.element.id+"-"+this.viewerContainerId,this.swatchContainer=this.element.querySelectorAll("#"+this.swatchContainerId)[0],this.swatchContainer.id=this.element.id+"-"+this.swatchContainerId,this.setIndicatorContainer=this.element.querySelectorAll("#"+this.setIndicatorContainerId)[0],this.setIndicatorContainer.id=this.element.id+"-"+this.setIndicatorContainerId;var i=this.element.getElementsByClassName("viewer-wrapper")[0],s=i.className,n=this.config.getConfig().Swatches;i.className=s.replace(/(^|\s)alt-image-\S+/," alt-image-"+n.position),this.params.addEventListener(s7sdk.Event.SDK_READY,function(e){t.SDKReady()},!1),e=this.config.getMediaSet(),this.params.push("Swatches.resizable","0"),this.params.push("serverurl",e.serverurl),this.params.push("videoserverurl",e.videoserverurl),this.params.push("contenturl",e.contenturl),e.assetSet||this.params.push("MediaSet.asset",e.asset),this.params.push("MediaSet.labelkey","label"),e.config2&&this.params.push("config2",e.config2),this.params.setLocalizedTexts(this.config.getI18n()),this.params.init()},SDKReady:function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.CONFIG&&console.log("VFDPS7Viewer.prototype.SDKReady",this.sdk_ready),this.sdk_ready||(this.sdk_ready=!0,this.initContainer(),this.initMediaSet())},initMediaSet:function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VFDPS7Viewer.prototype.initMediaSet");var t=this;if(this.mediaSet)this.updateMediaSet();else{var e,i=this.config.getMediaSet();if(i.assetSet)try{e=s7sdk.MediaSetParser.parse(i.assetSet,!1).items[0]}catch(e){console.error(e)}i.assetSet&&!e&&this.params.push("MediaSet.asset",i.asset),this.mediaSet=new s7sdk.set.MediaSet(null,this.params,this.element.id+"-mediaSet"),this.mediaSet.addEventListener(s7sdk.event.AssetEvent.NOTF_SET_PARSED,function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINER&&console.log("s7sdk.event.AssetEvent.NOTF_SET_PARSED",e),t.onMediaSetParsed(e)},!1),i.assetSet&&e&&this.onMediaSetParsed({s7event:{asset:e}})}},initContainer:function(){if(s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VFDPS7Viewer.prototype.initContainer"),!this.ViewerContainer){for(var n=this,e=[];this.element.firstChild;)e.push(this.element.removeChild(this.element.firstChild));this.ViewerContainer=new s7sdk.common.Container(this.element.id,this.params,this.element.id+"-vfdp-viewer-wrapper");for(var t=0;t<e.length;t++)this.ViewerContainer.component.innerContainer.appendChild(e[t]);this.Container=new s7sdk.common.Container(this.viewerContainer.id,this.params,this.viewerContainer.id+"-image-viewer");var o=this.config.getConfig().Swatches.hovertoshowhero,r=!o;n.Container.addEventListener("touchend",function(e){r=!0}),this.Container.addEventListener(s7sdk.event.StatusEvent.NOTF_VIEW_READY,function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINER&&console.log("s7sdk.event.StatusEvent.NOTF_VIEW_READY",e),v.map(n.Viewer,function(e,t){if(n.Viewer[t].isActiveViewer){var i=n.Viewer[t].Viewer.component.getCurrentAsset();if(i.parent===n.mediasetDesc&&r){var s=n.mediasetDesc.items.indexOf(i);n.setViewerActiveIndex(s),n.setSelectedSwatch(s),r=!o}}})},!1)}},initViewer:function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VFDPS7Viewer.prototype.initViewer");var n=this,e=!1;if(Object.keys(this.Viewer).length){try{for(var t=0;t<this.mediasetDesc.items.length&&!e;t++)for(var i=n.getMediaType(this.mediasetDesc.items[t]),s=0;s<n.config.getSizes().length;s++){var o=n.config.getConfig(n.config.getSizes()[s]).Viewer.type[i];if(-1===n.viewerTypes.indexOf(o)&&o){e=!0;break}}}catch(e){console.error(e)}var r=this.getViewerActiveIndex();if(this.setViewerActiveIndex(r),this.updateCurrentView(this.mediasetDesc.items[r]),!e)return}if(this.setViewerActiveIndex(this.getViewerActiveIndex()),this.mediaTypes=[],this.viewerTypes=[],n.config.config.singleViewerMode){var a;this.originalMediaSetItems=this.mediasetDesc.items;for(var c=0;c<this.mediasetDesc.items.length;c++){var d=this.mediasetDesc.items[c],h=n.getMediaType(d);if(n.config.config.singleViewerType===h){a=d;break}}a&&(this.mediasetDesc.items=[],this.mediasetDesc.items.push(a))}v.map(this.mediasetDesc.items,function(e,t){var s=n.getMediaType(e);v.map(n.config.getSizes(),function(e,t){var i=n.config.getConfig(e).Viewer.type[s];-1===n.mediaTypes.indexOf(s)&&i&&n.mediaTypes.push(s),i&&-1===n.viewerTypes.indexOf(i)&&n.viewerTypes.push(i)})});var g=this.mediasetDesc.items[this.getViewerActiveIndex()],l=this.viewerTypes.length;v.map(this.viewerTypes,function(t,e){w(["vfdp-s7-viewer."+t],function(e){n.Viewer[t]=new e(n.config,n.Container,n.params),n.Viewer[t].setItem(g),-1!==n.Viewer[t].type.indexOf(g.type)&&n.Viewer[t].queue(function(){n.fadeOutPreloadedImage()}),n.Viewer[t].queue(function(){if(!--l){n.element.setAttribute("data-viewer-state","ready");var e=document.createEvent("Event");e.initEvent("init.viewer.complete.ready",!0,!0),document.dispatchEvent(e)}})})});var u=document.createEvent("Event");u.initEvent("init.viewer.complete",!0,!0),document.dispatchEvent(u)},changeViewerMode:function(e,t){e?(this.config.config.singleViewerMode=!0,this.config.config.singleViewerType=t):(this.mediasetDesc.items=this.originalMediaSetItems,this.originalMediaSetItems=null,this.config.config.singleViewerType="",this.config.config.singleViewerMode=!1)},initPrevNextButtons:function(){var e=this;this.prevNextButtonsVisible=!0,this.prevButton=new s7sdk.common.PanLeftButton(this.Container,this.params,this.element.id+"-prev-swatch"),this.nextButton=new s7sdk.common.PanRightButton(this.Container,this.params,this.element.id+"-next-swatch"),this.prevButton.addEventListener("click",function(){e.handleGalleryProgression(-1,!0)}),this.nextButton.addEventListener("click",function(){e.handleGalleryProgression(1,!0)})},initSwatches:function(){if(s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VFDPS7Viewer.prototype.initSwatches"),this.Swatches)return this.Swatches.setMediaSet(this.mediasetDesc),void this.updateSwatches();var t=this;this.Swatches=new s7sdk.set.Swatches(this.swatchContainer.id,this.params,this.swatchContainer.id+"-vfSwatches"),this.Swatches.setMediaSet(this.mediasetDesc),this.Swatches.addEventListener(s7sdk.event.AssetEvent.SWATCH_SELECTED_EVENT,function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINER&&console.log("s7sdk.event.AssetEvent.SWATCH_SELECTED_EVENT",e),t.swatchSelected(e)},!1),this.updateSwatches()},initSetIndicator:function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VFDPS7Viewer.prototype.initSetIndicator"),this.SetIndicator||(this.SetIndicator=new s7sdk.set.SetIndicator(this.setIndicatorContainer.id,this.params,this.setIndicatorContainer.id+"set_indicator")),this.SetIndicator.setNumberOfPages(this.mediasetDesc.items.length)},destroy:function(){if(s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VFDPS7Viewer.prototype.destroy"),!this.destroyed){for(var e=[];this.ViewerContainer.component.innerContainer.firstChild;)e.push(this.ViewerContainer.component.innerContainer.removeChild(this.ViewerContainer.component.innerContainer.firstChild));for(var t=0;t<e.length;t++)this.element.appendChild(e[t]);this.ViewerContainer.dispose(),this.removeEventHandlers(),this.prevButton&&this.prevButton.dispose(),this.nextButton&&this.nextButton.dispose(),v.map(this.Viewer,function(e){e.destroy()}),this.Swatches.dispose(),this.Container.dispose(),this.params.dispose(),this.swatchContainer.id=this.swatchContainerId,this.viewerContainer.id=this.viewerContainerId,this.setIndicatorContainer.id=this.setIndicatorContainerId,n.numInstances=n.numInstances-1,this.destroyed=!0}},updateMediaSet:function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VFDPS7Viewer.prototype.updateMediaSet"),e=e||this.config.getMediaSet("asset"),this.mediaSet.component.asset!==e&&this.mediaSet.setAsset(e)},updateMediaSetIndex:function(e){var t=0<=e?e:parseInt(this.config.getMediaSet("index")),i=this.mediasetDesc.items.length-1,s=i<t?i:t;this.setViewerActiveIndex(s),this.updateCurrentView(this.mediasetDesc.items[s]),this.setSelectedSwatch(s),this.setSelectedIndicator(s)},updateViewer:function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VFDPS7Viewer.prototype.updateViewer",e);var i=this.config.getConfig().Viewer,s=this;v.map(this.Viewer,function(e,t){s.viewerConfig[t]&&JSON.stringify(s.viewerConfig[t].modifiers)===JSON.stringify(i[t].modifiers)||s.Viewer[t].setModifier(i[t].modifiers),s.viewerConfig[t]=i[t]}),this.updateCurrentView(e),this.containerResize()},updateCurrentView:function(i){if(s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VFDPS7Viewer.prototype.updateCurrentView",i),i){var s=this;v.map(this.Viewer,function(e,t){s.Viewer[t].setItem(i)})}},updateSwatches:function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VFDPS7Viewer.prototype.updateSwatches",e);var e,t,i,n=this,s=!this.Swatches&&!this.config.getMode("swatches"),o=this.Swatches&&!this.config.getMode("swatches"),r=this.config.getMode("swatches")&&!this.Swatches,a=this.config.getMode("swatches")&&this.Swatches;if(!s){if(e=this.config.getConfig().Swatches,i=(t=this.element.getElementsByClassName("viewer-wrapper")[0]).className,o)return this.Swatches.hide(),void(t.className=i.replace(/(^|\s)alt-image-\S+/," alt-image-none"));if(r)return this.initSwatches(),void this.fadeOutPreloadedImage();a&&this.Swatches.show(),t.className=i.replace(/(^|\s)alt-image-\S+/," alt-image-"+e.position),this.swatchConfig&&JSON.stringify(this.swatchConfig.position)===JSON.stringify(e.position)||("left"==e.position||"right"==e.position?this.Swatches.setModifier({tmblayout:"1,0"}):this.Swatches.setModifier({tmblayout:"0,1"})),this.swatchConfig&&JSON.stringify(this.swatchConfig.modifiers)===JSON.stringify(e.modifiers)||n.Swatches.setModifier(e.modifiers),this.setSelectedSwatch(),this.swatchConfig=e,this.swatchHoverToShow(n),this.Swatches.addEventListener("click",function(e){var t=n.config.getConfig().Swatches;if(null!==t&&t.modifiers&&"0"===t.modifiers.pagemode){var i=e.target.getAttribute("data-component"),s=e.target.getAttribute("state");"ScrollLeftButton"!==i&&"ScrollUpButton"!==i||"disabled"!==s||n.updateMediaSetIndex(n.mediasetDesc.items.length-1),"ScrollRightButton"!==i&&"ScrollDownButton"!==i||"disabled"!==s||n.updateMediaSetIndex(0)}})}},setSelectedSwatch:function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VFDPS7Viewer.prototype.setSelectedSwatch",e),void 0===e&&(e=this.getViewerActiveIndex()||0),this.SetIndicator&&this.SetIndicator.setSelectedPage(e),this.Swatches&&(e&&this.Swatches.component.hasOwnProperty("swatches_")&&e>=this.Swatches.component.swatches_.length&&(e=this.Swatches.component.swatches_.length-1),this.Swatches.selectSwatch(-1,!0),this.Swatches.component.itemIndex_=e,this.setSwatchPage(),this.Swatches.component.swatches_[e]&&this.Swatches.component.swatchGroup_&&(this.Swatches.component.currentSwatch_=this.Swatches.component.swatches_[e],this.Swatches.component.currentSwatch_.setSelected(!0)))},getMediaType:function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VFDPS7Viewer.prototype.getMediaType",e);var t=e.type;for(var i in s7sdk.ItemDescType)if(s7sdk.ItemDescType.hasOwnProperty(i)&&s7sdk.ItemDescType[i]===t)return i},getViewerActiveIndex:function(){var e=this.config.getMediaSet("index"),t=this.mediasetDesc.items.length-1;return t<e?t:e},setViewerActiveIndex:function(e){if(e=e||0,this.config.setConfig({media:{set:{index:e}}})){var t=document.createEvent("CustomEvent");t.initCustomEvent("viewer.activeIndex.change",!1,!1,{activeIndex:e}),window.dispatchEvent(t)}},addEventHandlers:function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VFDPS7Viewer.prototype.addEventHandlers");var t=this;if(!this.eventHandelersAdded){this.eventHandelersAdded=!0,this.ViewerContainer.addEventListener(s7sdk.event.ResizeEvent.WINDOW_RESIZE,function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINER&&console.log("s7sdk.event.ResizeEvent.WINDOW_RESIZE",e),t.onWindowResize()},!1),this.ViewerContainer.addEventListener("click",function(e){e.target.hasOwnProperty("button")&&e.target.button instanceof s7sdk.common.FullScreenButton&&t.onClickFullScreen(),"s7dot"===e.target.getAttribute("class")&&t.indicatorPageChange(e.target.getAttribute("pagenumber"))}),this.ViewerContainer.addEventListener(s7sdk.event.AssetEvent.ASSET_CHANGED,function(e){t.config.getMode("swatches")?t.Swatches.getFrame()!==e.s7event.frame&&t.isCurrentAssetChangeNotCausedByHover&&t.updateMediaSetIndex(e.s7event.frame):t.config.getMode("setIndicator")&&t.indicatorPageChange(e.s7event.frame)}),this.ViewerContainer.addEventListener(s7sdk.event.ResizeEvent.FULLSCREEN_RESIZE,function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINER&&console.log("s7sdk.event.ResizeEvent.FULLSCREEN_RESIZE",e),t.fullscreenChangeCallback&&t.fullscreenChangeCallback(t.ViewerContainer.isFullScreen()),t.ViewerContainer.isFullScreen()&&v.getScreenSize()!==t.currentSize&&t.ViewerContainer.cancelFullScreen(),t.containerResize(),t.ViewerContainer.isFullScreen()||v.map(t.Viewer,function(e){e.ControlBar.FullScreenButton.setSelected(!1)})},!1),this.Container.addEventListener(s7sdk.event.ResizeEvent.COMPONENT_RESIZE,function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINEST&&console.log("s7sdk.event.ResizeEvent.COMPONENT_RESIZE",e),t.containerResize()},!1),this.swatchContainer.addEventListener("transitionend",function(e){t.resizeSwatches()},!1);var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver||!1;e?(this.observer=new e(function(e){e.forEach(function(e){t.onConfigChange(e)})}),this.observer.observe(this.element,{attributes:!0,attributeFilter:["data-viewer-options"]})):(this.element.addEventListener("DOMAttrModified",function(e){t.onConfigChange(e)},!1),this.element.addEventListener("onpropertychange",function(e){t.onConfigChange(e)},!1)),this.initPrevNextButtons()}},removeEventHandlers:function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VFDPS7Viewer.prototype.removeEventHandlers"),this.observer&&this.observer.disconnect()},onWindowResize:function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINEST&&console.log("VFDPS7Viewer.prototype.onWindowResize"),this.containerResize();var e=v.getScreenSize();e!==this.currentSize&&(this.currentSize=e,this.updateSwatches(),this.updateViewer(),this.updateIndicator(),this.updatePrevNextButtons(),this.updateLabels())},updateIndicator:function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINEST&&console.log("VFDPS7Viewer.prototype.updateIndicator");var e=this.SetIndicator&&!this.config.getMode("setIndicator"),t=this.config.getMode("setIndicator"),i=!this.SetIndicator&&this.config.getMode("setIndicator");e&&this.SetIndicator.hide(),i?this.initSetIndicator():t&&this.SetIndicator.show()},updatePrevNextButtons:function(){if(s7sdk.Logger.traceLevel>=s7sdk.Logger.FINEST&&console.log("VFDPS7Viewer.prototype.updatePrevNextButtons"),this.prevButton){if(this.hasOwnProperty("Swatches")&&this.Swatches.component.swatches_.length<2)return this.prevNextButtonsVisible=!1,this.prevButton.hide(),void this.nextButton.hide();this.config.getMode("prevNextButtons")&&!this.prevNextButtonsVisible&&(this.prevNextButtonsVisible=!0,this.prevButton.show(),this.nextButton.show()),!this.config.getMode("prevNextButtons")&&this.prevNextButtonsVisible&&(this.prevNextButtonsVisible=!1,this.prevButton.hide(),this.nextButton.hide())}},updateLabels:function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINEST&&console.log("VFDPS7Viewer.prototype.updateLabels"),v.map(this.Viewer,function(e){var t=e.ControlBar.component.obj.querySelectorAll("span.label");if(t.length)for(var i=0;i<t.length;i++)t[i].parentElement.removeChild(t[i])});var s=this.config.getConfig().labels;s.length&&v.map(this.Viewer,function(e){for(var t=0;t<s.length;t++){var i="FullScreenButton"===s[t]?e.ControlBar[s[t]].component.toolTipUnselected:e.ControlBar[s[t]].component.hint;e.ControlBar[s[t]].component.obj.innerHTML='<span class="label">'+i+"</span>"}})},swatchHoverToShow:function(s){if(s.swatchConfig.hovertoshowhero){var n=this;s.Swatches.component.swatches_.forEach(function(e,t){var i=e.div;i.areEventsAttahed||(i.areEventsAttahed=!0,i.addEventListener("mouseenter",function(e){n.isCurrentAssetChangeNotCausedByHover=!1,s.updateCurrentView(s.mediasetDesc.items[t])}),i.addEventListener("mouseleave",function(e){s.updateCurrentView(s.mediasetDesc.items[s.getViewerActiveIndex()]),n.isCurrentAssetChangeNotCausedByHover=!0}),i.addEventListener("focus",function(e){n.isCurrentAssetChangeNotCausedByHover=!0,s.updateCurrentView(s.mediasetDesc.items[t])}))})}},onMediaSetParsed:function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VFDPS7Viewer.prototype.onMediaSetParsed",e),this.mediasetDesc=e.s7event.asset,this.config.config.resetMediaIndex&&this.setViewerActiveIndex(0),this.initViewer(),this.updateViewer(),this.config.getMode("swatches")&&this.initSwatches(),this.config.getMode("setIndicator")&&this.initSetIndicator(),this.addEventHandlers(),this.updatePrevNextButtons()},subscribeToFullScreenChange:function(e){this.fullscreenChangeCallback=e},onClickFullScreen:function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.CONFIG&&console.log("VFDPS7Viewer.prototype.onClickFullScreen");var e=this;this.ViewerContainer.isFullScreen()?this.ViewerContainer.cancelFullScreen():(v.map(e.Viewer,function(e){e.ControlBar.FullScreenButton.isSelected()||e.ControlBar.FullScreenButton.setSelected(!0)}),this.ViewerContainer.requestFullScreen()),setTimeout(function(){e.containerResize(),e.swatchHoverToShow(e)},250)},swatchSelected:function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VFDPS7Viewer.prototype.swatchSelected",e),this.updateCurrentView(e.s7event.asset),this.setViewerActiveIndex(this.Swatches.getFrame())},handleGalleryProgression:function(e,t){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VFDPS7Viewer.prototype.handleGalleryProgression",event),e=e||0;var i=this.getViewerActiveIndex(),s=this.mediasetDesc.items.length-1,n=i+e;t&&(s<n&&(n=0),n<0&&(n=s)),this.updateMediaSetIndex(n)},indicatorPageChange:function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VFDPS7Viewer.prototype.setIndicatorChanged",event);var t=e;this.setViewerActiveIndex(t),this.SetIndicator.setSelectedPage(t),this.updateCurrentView(this.mediasetDesc.items[t])},setSelectedIndicator:function(e){this.SetIndicator&&this.SetIndicator.setSelectedPage(e)},setSwatchPage:function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("VFDPS7Viewer.prototype.setSwatchPage",event);var e=Math.floor(this.Swatches.getFrame()/this.Swatches.component.fitCols_)+1,t=Math.floor(this.Swatches.getFrame()/this.Swatches.component.fitRows_)+1;this.Swatches.setCurrentPage({x:e,y:t})},containerResize:function(){if(s7sdk.Logger.traceLevel>=s7sdk.Logger.FINEST&&console.log("VFDPS7Viewer.prototype.containerResize"),0<this.Container.getWidth()&&0<this.Container.getHeight()){var e=this.Container.getComponent().obj.getBoundingClientRect().width,t=this.Container.getComponent().obj.getBoundingClientRect().height;0<t&&0<e&&(this.resizeViewer(Math.floor(e),Math.floor(t)),this.resizeSwatches(),this.resizeIndicators())}},resizeViewer:function(t,i){if(s7sdk.Logger.traceLevel>=s7sdk.Logger.FINEST&&console.log("VFDPS7Viewer.prototype.containerResize",t,i),!(t<=0||i<=0)){v.map(this.Viewer,function(e){e.resize(t,i)});var e=document.createEvent("Event");e.initEvent("viewer.resizeEvent.componentResize",!1,!0),document.dispatchEvent(e)}},resizeSwatches:function(){if(s7sdk.Logger.traceLevel>=s7sdk.Logger.FINEST&&console.log("VFDPS7Viewer.prototype.resizeSwatches"),this.Swatches&&this.config.getMode("swatches")&&this.Swatches.getContainer()){var e=this.Swatches.getContainer().offsetWidth,t=this.Swatches.getContainer().offsetHeight;this.currentSwatchWidth==e&&this.currentSwatchHeight==t||(this.currentSwatchWidth=e,this.currentSwatchHeight=t,this.Swatches.resize(e,t))}},resizeIndicators:function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINEST&&console.log("VFDPS7Viewer.prototype.resizeIndicators");var e,t,i=this.SetIndicator?document.getElementById(this.SetIndicator.compId):null;i&&this.SetIndicator&&this.config.getMode("setIndicator")&&(e=this.setIndicatorContainer.getBoundingClientRect().width,t=this.setIndicatorContainer.getBoundingClientRect().height,this.currentIndicatorWidth==e&&this.currentIndicatoreight==t||(this.currentIndicatorWidth=e,this.currentIndicatoreight=t,this.SetIndicator.restrictedStylesValues.s7setindicator.width=Math.floor(e),this.SetIndicator.restrictedStylesValues.s7setindicator.height=Math.floor(t),i.style.width=Math.floor(e)+"px",i.style.height=Math.floor(t)+"px"))},fadeOutPreloadedImage:function(){if(this.element.querySelectorAll("#"+this.viewerContainer.id)[0].className+=" fade-in",this.element.getElementsByClassName("vfdp-s7-viewer-preload-container")[0].className+=" fade-out",this.config.getMode("swatches"))this.swatchContainer.className+=" fade-in";else if(this.config.getMode("setIndicator"))this.element.getElementsByClassName("vfdp-s7-viewer-preload-container")[0].className+=" hidden";else{var e=this.element.getElementsByClassName("viewer-wrapper")[0],t=e.className;e.className=t.replace(/(^|\s)alt-image-\S+/,"")}},onConfigChange:function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINEST&&console.log("VFDPS7Viewer.prototype.onConfigChange",e);var t=JSON.parse(this.element.getAttribute("data-viewer-options"));t&&this.config.setConfig(t)&&(this.mediaSet&&t.media&&t.media.set&&t.media.set.asset&&this.updateMediaSet(),this.updateViewer(),this.updateMediaSetIndex(),this.updateSwatches(),this.updateIndicator())}},function(i){var e=document.getElementsByClassName("vfdp-s7-viewer");[].forEach.call(e,function(e){var t=v.extend(SCENE7.VIEWER_CONFIG,i||{});new n(e,t)})}});
//# sourceMappingURL=../../../../maps/js/wcs/view/vfdp-s7-viewer/app.hash-06f6a1237734510c401c25209a732766.js.map