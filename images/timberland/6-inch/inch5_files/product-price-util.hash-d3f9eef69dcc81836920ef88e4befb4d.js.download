define(["jquery"],function(p){var t=function(i){if(!(this instanceof t))return new t(i);this.priceContainer=i,this.$price=i.find(".product-price-amount-js"),this.$priceOri=i.find(".original-price-js"),this.$priceCur=i.find(".current-price-js"),!0===WCS_CONFIG.get("grid::productShowDiscountPercentage")&&(this.$priceDis=i.find(".discount-price-js")),this.wasText=this.$priceOri.data("text"),this.nowText=this.$priceCur.data("text")};return t.prototype={init:function(){return this},setDataAmount:function(i){this.$price.data("amount",i)},setPriceContainer:function(i){this.priceContainer=i},getPriceContainer:function(){return this.priceContainer},hideAllPrices:function(){this.$price.hide(),this.$priceOri.hide(),this.$priceCur.hide(),!0===WCS_CONFIG.get("grid::productShowDiscountPercentage")&&this.$priceDis.hide()},showSalePrice:function(i,t,e,r,s){if(0,!0===WCS_CONFIG.get("grid::productShowDiscountPercentage")){var c,n=this.$priceDis.data("text");c=this.getDiscountPercentage(e,r),this.priceContainer.hasClass("positive-discount-price")&&(this.$priceCur.css("visibility","visible"),n&&(c+=n)),this.$priceDis.html(c),this.$priceDis.show()}else this.priceContainer.removeClass("positive-discount-price");this.$priceCur.length?(this.$priceOri.html(this.wasText+" "+i),this.$priceCur.html(this.nowText+" "+t),this.$price.html(""),this.$price.hide(),WCS_CONFIG.get("PDP::pdpListPriceRangeEnabled")&&s?this.$priceOri.hide():this.$priceOri.show(),this.$priceCur.show()):(this.$priceOri.html(i),this.$price.html(t)),!0===WCS_CONFIG.get("grid::productShowDiscountPercentage")&&this.$priceDis.show(),p.pubsub("publish","product.price.updated",t)},getDiscountPercentage:function(t,e){var r,s=t.length,c="number"==typeof e?1:e.length;if(s<=1&&c<=1)r=this.calculateDiscount(t[0],e),this.priceContainer.hasClass("positive-discount-price")&&(r*=-1),r+="%";else if(WCS_CONFIG.get("PDP::pdpListPriceRangeEnabled")){var n,h;r=p.isArray(e)?(n=this.calculateDiscount(t[0],e[0])+"%",1<c?n+" - "+(h=this.calculateDiscount(t[s-1],e[1])+"%"):n):(n=this.calculateDiscount(t[0],e)+"%",h=this.calculateDiscount(t[1],e)+"%",r=t[0]<t[1]?h+" - "+n:n+" - "+h)}else{for(i=0;i<s;i++)t[i]=Math.round(100*(t[i]-e)/e)+"%";r=t[1]+" - "+t[0]}return!0===WCS_CONFIG.get("PDP::pdpDisplayBracketInDiscountPercent")&&(r="["+r+"]"),r},calculateDiscount:function(i,t){return Math.round(100*(i-t)/t)||0},updatePriceHTML:function(i,t){i&&this.$price.data("amount",0),t?this.$price.html(t):this.$price.html(""),this.$price.show(),this.$priceOri.html(""),this.$priceCur.html(""),this.$priceDis&&this.$priceDis.hide(),WCS_CONFIG&&"function"==typeof WCS_CONFIG.get&&!0===WCS_CONFIG.get("PDP::pdpShowPromoPriceOnly")&&(this.$priceCur.addClass("no-discount"),this.$price.addClass("no-discount")),p.pubsub("publish","product.price.updated",t)}},t});
//# sourceMappingURL=../../../maps/js/wcs/view/product-price-util.hash-5119545b98bb8a2d71f639cab232e0f8.js.map