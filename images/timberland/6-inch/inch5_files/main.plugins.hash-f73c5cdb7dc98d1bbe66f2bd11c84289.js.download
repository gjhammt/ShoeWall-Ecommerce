define(["require","jquery"],function(e,a){return{DEBUG:Boolean(window.localStorage.getItem("DEBUG"))||!1,_components:{},_plugins:{},deferred:function(){var e=this,o=["color: #0071B5;","text-transform: uppercase;"];return(new a.Deferred).done(function(n){e.DEBUG&&n&&console.log("%cpluginLoader => ",o.join(";"),n)}).fail(function(n){n&&console.error(n)}).progress(function(n){e.DEBUG&&n&&console.warn(n)})},loadPlugins:function(n){n=Array.isArray(n)?n:[n];var e=this;return n.map(function(n){return e.loadPlugin(n)})},loadPlugin:function(t){var i,n=t.context||null,r=t.initFunction||null,u=t.options||null,l=t.callback||null,c=t.$el||a(t.selector,n),s=this.deferred();return c.length?(e([t.name],function(n){var e=n;if(r)if("function"!=typeof a.fn[r])s.reject(new Error(r+" is not defined as a JQuery plugin"));else{var o=c[r](u);e=e||o,i=t.name+" successfully loaded and initialized"}else i=t.name+" successfully loaded";l&&("function"!=typeof l?s.reject(new Error(l+" is not a function.")):(i+="\n"+t.name+" callback successfully called",l(c,e,u))),s.resolve(i,e)},function(n){s.reject(n)}),s):s.notify("Tried to run component "+t.name+", but no elements found.").resolve(!1)},findComponents:function(n){var e=(n=n||a(document)).find("[data-vfdp]").addBack("[data-vfdp]"),o=[];return e.each(function(n){o.push(a(this).data("vfdp"))}),o=o.filter(function(n,e,o){return o.indexOf(n)===e}),this._plugins=o,this._components=e,{plugins:o,components:e}},runComponents:function(n,e){var o=this;return n=n||o._plugins,e=e||o._components,"string"==typeof n&&(n=[n]),n.length<=0||e.length<=0?[o.deferred().notify("Could not run components. No component instances specified and none found in selector cache.").resolve(!1)]:n.map(function(n){return o.loadPlugin({name:"vfdp."+n,initFunction:n,$el:e.filter('[data-vfdp="'+n+'"]')})})},runVFDPPlugins:function(n){n=n||a(document);return this.findComponents(n),a.when.apply(null,this.runComponents())},bindRunVFDPPluginsToEvent:function(n){var e=this,o=a(document);o.off(n),o.on(n,function(n){return e.runVFDPPlugins(a(n.target))})},initVFDPPluginEvents:function(n){n=n||"open.zf.reveal.vfdp-plugin-loader";this.bindRunVFDPPluginsToEvent(n)}}});
//# sourceMappingURL=../../maps/js/shared/main.plugins.hash-74cf5e00e73b734dc9eeda330a4f5979.js.map