define(["jquery","pubsub","wcs.utils","shared.main.plugins","shared.main.screen","shared.lazyload","foundation.reveal"],function(u,e,o,n,t){var p,i,a,r,s,c,l,d,h=p={updateTime:function(e,t){t<10?e.text("0"+t):e.text(t)},initCountDown:function(){var o=86400,a=3600,e=u(".countdown-js"),r=e.find(".countdown-day-js"),s=e.find(".countdown-hours-js"),c=e.find(".countdown-min-js"),l=e.find(".countdown-sec-js"),d=parseInt(r.text())*o+parseInt(s.text())*a+60*parseInt(c.text())+parseInt(l.text());d=(new Date).getTime()+1e3*d,setInterval(function(){var e,t,n,i=0;(i=Math.floor((d-new Date)/1e3))<0&&(i=0),e=Math.floor(i/o),p.updateTime(r,e),i-=e*o,t=Math.floor(i/a),p.updateTime(s,t),i-=t*a,n=Math.floor(i/60),p.updateTime(c,n),i-=60*n,--i,p.updateTime(l,i<0?59:i)},1e3)}},f={setSwatchPage:function(){return isSwatchPage=u("body").hasClass("pdp-swatches"),isSwatchPage},updateProductURL:function(e){u("a.more-detail-js").attr("href",e)},updateOGImageSrc:function(e){u("meta[ property = 'og:image']").attr("content",e)},updateProductDesc:function(e){if(""!==e){var t=m.decodeHTML(e);u(".product-details-js .desc-container-js").html(t)}},updateProductName:function(e,t){var n;n=0<u("#isQuickView").length?'<a href="'+t+'">'+e+"</a>":e,u("#product-info h1").html(n)},updateProductPartNumber:function(e){u(".product-style-js").html(e)},updateProductBadge:function(e,t,n){return!((n=n||u(".product-views-promo-badge-image")).length<1)&&(e&&""!==e&&t&&""!==t?n.attr({src:e,alt:t}):n.attr({src:"",alt:""}),!0)},updateProductDetailDrawerDescriptionImage:function(e,t){t&&0!==t.length||(t=u(".product-details-drawer-container .drawer-description-image")),t.attr("src",e)},toggleSelectedClass:function(e,t){t?e.addClass("selected"):e.removeClass("selected")},toggleVisibility:function(e,t){t&&e.hasClass("hidden")?e.removeClass("hidden"):t||e.hasClass("hidden")||e.addClass("hidden")},updateProductPrice:function(e){0<e.length&&0<u(".price-container-js").length&&(u(".price-container-js")[0].innerHTML=e[0].innerHTML)},populateProductPartNumberAndAttrName:function(e){u(".attr-color:visible .collapsable-container-js .selected img").attr("data-part-number");var t=u(".product-form-js").eq(e);t.find(".product-style-js").length,0<t.find(".attr-selected-color-js").length&&t.find(".attr-selected-color-js").html(t.find(".attr-color .collapsable-container-js .selected img").attr("alt"))},setShowOverviewHandler:function(){u(".link-more-btn-js").on({click:function(e){e.preventDefault(),u(".prod-desc-js").toggleClass("ellip-line",500)}})},initDiscountTooltips:function(){var e=".discount-container .tooltip-js",t={contentAsHTML:!0,multiple:!0,animation:"fade",trigger:"click",interactive:!0};n.loadPlugins({name:"jquery.tooltipster",selector:".discount-container .tooltip-js",callback:function(){u(e).each(function(){u(this).tooltipster(t)}),u.pubsub("subscribe","WCS.PRODUCT_FORM.PROMO.RENDER.COMPLETE",function(){u(e).each(function(){u(this).tooltipster(t)})})}})},setStepContentWidths:function(){var t=u("#product-content-container .product-form-js").width();$stepContainer=u(".step-container:not(.attr-color)",".pdp-drawer"),$stepContainer.each(function(){var e=u(this);e.find(".step-content").css("width",t-e.find(".step-header").outerWidth(!0)-1)})},initMobileCarouselViewer:function(){var e=u(".product-img-js .views-js ul").clone();e.addClass("mobile-viewer-js"),u(".product-img-js .views-js").append(e)},updateProductDetailBtnURL:function(e){var t=u(".quickview-box-js .product-detail-btn-js"),n=t.attr("href"),i=u("label.context-trigger-js.active-context-js");0<i.length&&(n=i.attr("data-product-url")),n=o.setURLParam(n,"variationId",e),t.attr("href",n)},showAltViewControls:function(){"small"!==t.size()&&u(".product-view-control-js").not(".secondary").show()}},m={decodeHTML:function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0].nodeValue},setupShareButton:function(){$shareButton=u("#share-button-container","#pdp-header-content"),$shareButton.clone().appendTo("#product-views-container")},appendZoomPopup:function(){var e=u(".full-zoom-hopup-js"),t=u('<div class="reveal-modal full-zoom-hopup-js">');0===e.length&&u("body").append(t)},createOlapicUploadWidget:function(){if(WCS_CONFIG.get("PDP::olapicEnabled")&&(_olapicPartNumber=u(".product-form-js").attr("data-olapic-partnumber"),_olapicPartNumber&&!0===OLAPIC_SETTINGS.SHOW_ALT_IMAGE)){var e=OLAPIC_SETTINGS.CUSTOMER_ID,t=OLAPIC_SETTINGS.UPLOAD_WIDGET_ID,n=document.createElement("script"),i=document.domain+document.location.pathname;n.async=!0,n.type="text/javascript",n.src=encodeURI("//widgets.photorank.me/automator?e=olapic_upload_widget&customer_id="+e+"&url="+encodeURIComponent(i)+"&title="+encodeURIComponent(document.title)+"&widget="+t+"&tags="+_olapicPartNumber+"&tag_based="+!0+"&cat_based="+!1+"&collection="+!1),(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(n)}},duplicateFullZoomBtn:function(){var e=u(".product-view-control-js").clone(!0),t=f.setSwatchPage();e.addClass("secondary"),t?(e.find(".btn-full").detach(),e.find(".btn-zoom span").removeClass("icon").addClass("graphic-icon-zoom-mobile")):(e.find(".btn-full-js").addClass("secondary"),e.find(".btn-zoom").detach()),u("div.product-img-js").append(e)}},g=(i={init:function(){if(!(u(".green-index-hopup-js").length<1||null===u(".green-index-hopup-js").attr("sku")||""===u(".green-index-hopup-js").attr("sku"))){var e="/greenindex/api/tbl_greenindex/search-sku/"+u(".green-index-hopup-js").attr("sku");i.ajax(e)}},ajax:function(e){u.ajax({url:e,dataType:"json",success:function(e){null!==e&&"failure"!=e.result&&(u(".greenshortdesc-js").html(e.product_name),u(".greenscore-js").html(e.gi_score),u(".greenclimimpact-js").html(e.climate_score),u(".greenchemimpact-js").html(e.chemical_score),u(".greenrescconsumption-js").html(e.resource_score),u("#greenindex-area-js").removeClass("hide"))}})}}).init,v=(a={},r=u(".topnav-header"),s=u("#pr-wyb-display"),c=u("#pr-container"),u(".review-tabs-container"),l=s.parent(c),d=!0,a.init=function(){u(window).on("scroll",a.onWindowScroll),u(document).on("click",".product-content-info-review-count-link, .product-content-info-rating, .pr-snippet-stars, .reviews-link, .star-rating-component",a.handleReviewsLinkClick),u(document).on("click",".product-content-info-review-q-and-a-link-js",a.scrollToPRQA)},a.onWindowScroll=function(e){l.find(".pr-wyb-header").hasClass("hide")&&l.find(".pr-carousel-slide").length&&a.handlePowerReviewHeaderVisibility(l)},a.handleReviewsLinkClick=function(e){var t;t=d?500:0,e.preventDefault(),u(".pr-snapshot-no-ratings").is(":visible")||u(".pr-rd-no-reviews").is(":visible")?a.scrollToPRContainer():u(".pr-review-wrap, .pr-review").is(":visible")?(u(".power-reviews-loading-indicator-js").removeClass("hide"),setTimeout(function(){u(".power-reviews-loading-indicator-js").addClass("hide"),a.scrollToPRContainer(),d=!1},t)):(u(".power-reviews-loading-indicator-js").removeClass("hide"),setTimeout(function(){u(".power-reviews-loading-indicator-js").addClass("hide"),a.scrollToPRContainer()},500))},a.handlePowerReviewHeaderVisibility=function(e){var t=e[0].getBoundingClientRect().top,n=e[0].getBoundingClientRect().bottom;t<window.innerHeight&&0<=n&&e.find(".pr-wyb-header").removeClass("hide")},a.calculateOffsetWithStickyNav=function(e){if(!r.hasClass("sticky"))return e;var t=r.outerHeight();return r.addClass("sticky-minimized"),e-(t+parseInt(r.css("borderBottomWidth"),10))},a.scrollToPRContainer=function(){var t=u("#rating_reviews"),n=0<t.length?t.offset().top:c.offset().top,i=0<t.height();n=a.calculateOffsetWithStickyNav(n),u("html, body").animate({scrollTop:n},800,function(){var e=a.calculateOffsetWithStickyNav(t.offset().top);i||e==n||u("html, body").animate({scrollTop:e},800)})},a.scrollToPRQA=function(){var e=u("#rating_questions");if(0!=e.length){var t=a.calculateOffsetWithStickyNav(e.offset().top);u("html, body").animate({scrollTop:t},800)}},a.init);return{pdpInitialSetup:{init:function(){f.setSwatchPage(),h.initCountDown(),m.setupShareButton(),g(),m.appendZoomPopup(),m.createOlapicUploadWidget(),f.populateProductPartNumberAndAttrName(),m.duplicateFullZoomBtn(),f.setShowOverviewHandler(),f.showAltViewControls(),v(),f.initDiscountTooltips()}}.init,quickViewInitialSetup:{init:function(){f.initDiscountTooltips(),f.setSwatchPage(),f.setStepContentWidths(),m.appendZoomPopup()},enableGridPageQuickview:function(e){return WCS_CONFIG.get("quickView::quickViewAlternateViewsEnabled")&&(e=e||u("body").hasClass("grid")),e}}.init,pdpUpdatePage:f,pdpTime:h,viewDomAdd:m,initGreenIndex:g,sizeChartSlideView:function(e){var t={},n="object"==typeof e?e:"body";t.bindEvents=function(){t.unbindEvents(),u(n).on("click.openSizeChart",".find-size-btn-js",t.openSizeChart),u(n).on("click.closeSizeChart touchend",".size-chart-js .close-button",t.closeSizeChart),u.pubsub("subscribe","product-form.attr.swatch.click",t.updateSizeChartHref)},t.updateSizeChartHref=function(e,t){var n=u(t.target).data("productSizeGuideUrl");n&&u(".size-chart-link").attr("href",n)},t.unbindEvents=function(){u(n).off("click.openSizeChart"),u(n).off("click.closeSizeChart")},t.openSizeChart=function(e){var t=u(".size-chart-js");u(".topnav header.sticky").height();u(".lazyload",t).lazyload(),t.slideDown(200,function(){window.location.href="#size-chart"})},t.closeSizeChart=function(e){e.preventDefault(),e.stopPropagation(),u(".size-chart-js").slideUp(),u("html, body").animate({scrollTop:u(n).offset().top},500)},t.init=function(){t.sizeChartElement=u(".size-chart"),t.scrollWrapper=u("html, body"),t.sizeChartElement.parents(".quickview-box").length&&(t.scrollWrapper=u(".reveal-overlay")),t.bindEvents()},t.init()},updateProductPartNumberAndAttrName:f.populateProductPartNumberAndAttrName}});
//# sourceMappingURL=../../../../maps/js/wcs/view/product-views/product-view-utilities.hash-4f6fab21141319a2282b2f988b76dbb0.js.map