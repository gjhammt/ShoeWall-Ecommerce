define(["jquery","domReady","pubsub"],function(i,t){var n=function(t){if(!(this instanceof n))return new n(t);this.$contextContainer=i(t);var e=this.$contextContainer.find(".context-trigger-js.active-context-js").first();return e&&(this._currentProductId=e.data("productId"),this._currentPartNumber=e.data("partNumber")),this._currentProductId&&(this._manageTriggers(),this._attachListeners()),this};n.prototype={_manageTriggers:function(){var t=this;this.$contextContainer.find(".context-trigger-js").each(function(){i(this).data("productId")!=t._currentProductId?i(this).removeClass("active-context-js"):i(this).hasClass("active-context-js")||i(this).addClass("active-context-js")})},_attachListeners:function(){this.$contextContainer.on("click",{self:this},this._handleContextChange)},_handleContextChange:function(t,e){if(e=e||t.data.self,i(t.target).hasClass("context-trigger-js")&&(!t.origCaller||"click"==t.origCaller)){var n=i(t.target).data("productId");if(n&&n!=e._currentProductId){e._currentProductId=n,e._currentPartNumber=i(t.target).data("partNumber"),e._manageTriggers(),e._toggleComponents(),e._setProductIdData(),e.$contextContainer.trigger("PRODUCT_CONTEXT_CHANGED");var r={productFormIndex:i(".product-form-js").index(this.productForm)};i.pubsub("publish","product-form.attr.context.changed",r)}}},_toggleComponents:function(){var t=this;this.$contextContainer.find(".context-toggle-js").each(function(){i(this).is("h1")||(i(this).data("productId")==t._currentProductId?(i(this).removeClass("hide"),i(this).find("input, select").prop("disabled",!1),i(this).find(".color-swatches-js .selected").trigger("click",{preventDataLayerPush:!0})):i(this).hasClass("hide")||(i(this).addClass("hide"),i(this).find("input, select").prop("disabled",!0)))})},_setProductIdData:function(){i(this).data("productId",this._currentProductId),this.$contextContainer.find(".context-data-js").data("productId",this._currentProductId)}},t(function(){i(".product-context-js").each(function(){var t=i(this).data("productContext");t||(t=new n(i(this)),i(this).data("productContext",t))}),i(document).on("QUICKSHOP_DISPLAY",function(){i(".product-context-js").each(function(){i(this).data("productContext")||i(this).data("productContext",new n(i(this)))})})})});
//# sourceMappingURL=../../../maps/js/wcs/view/product-context.hash-15cc66d06b46e2788ffbb3841896c768.js.map