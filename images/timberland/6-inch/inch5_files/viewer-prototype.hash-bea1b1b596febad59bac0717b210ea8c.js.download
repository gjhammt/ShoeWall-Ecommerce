define(["vfdp-s7-viewer.helpers","vfdp-s7-viewer.sdk"],function(t){"use strict";return function(s,i){s7sdk.Logger.traceLevel>=s7sdk.Logger.INFO&&console.log("Creating a new VFDP Platform Viewer"),this.id=t.getUniqueId(),this.ready=!1,this.sdk_ready=!1,this.stack=[],this.isActiveViewer=!1,this.prototypeDependencies=["s7sdk.common.Button","s7sdk.common.ControlBar"],this.init||(this.init=function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.error("The Viewer prototype.init method was called without being defined")});var o=this;t.map(this.config.getConfig().Viewer[i].modifiers,function(e,t){o.params.push(t,e)});var e=t.extend(this.prototypeDependencies,this.SDKDependencies);return t.map(e,function(e,t){s7sdk.Util.lib.include(e)}),this.queue=function(e,t){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("Viewer queue",e,t,this),"function"==typeof e&&(this.stack.push({method:e,args:t}),this.ready&&this.emptyQueue())},this.emptyQueue=function(){for(s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("Viewer emptyQueue");this.stack.length;){var e=this.stack.shift();e.method.apply(this,e.args)}this.ready=!0},o.destroy||(o.destroy=function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("Viewer destroy"),o.ControlBar&&"function"==typeof o.ControlBar.dispose&&o.ControlBar.dispose(),o.Viewer&&"function"==typeof o.Viewer.dispose&&o.Viewer.dispose(),o.ViewerWrapper&&"function"==typeof o.ViewerWrapper.dispose&&o.ViewerWrapper.dispose()}),this._hide=this.hide||function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("Viewer hide"),this.Viewer.hide(),this.ControlBar.hide()},this.hide=function(){this.queue(function(){this.isActiveViewer=!1}),this.queue(this._hide,arguments)},this._show=this.show||function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("Viewer show",this),this.Viewer.show(),this.ControlBar.show()},this.show=function(){this.queue(function(){this.isActiveViewer=!0}),this.queue(this._show,arguments)},this._resize=this.resize||function(e,t){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("Viewer _resize"),this.currentWidth==e&&this.currentHeight==t||(this.currentWidth=e,this.currentHeight=t,this.Viewer.resize(e,t))},this.resize=function(){this.queue(this._resize,arguments)},this._setItem=this.setItem||function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("Viewer _setItem",arguments),this.Viewer.setItem(e)},this._validateItem=function(e){if(s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("Viewer validateItem",e,arguments),-1!==this.type.indexOf(e.type)){var t=this.Viewer.component.getCurrentAsset();t!==e&&(this.setItemCache(t),this.applyItemCache(e),this._setItem(e)),this.show()}else this.hide()},this.setItem=function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("Viewer setItem"),this.queue(this._validateItem,arguments)},this._setModifier=this.setModifier||function(e){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("Viewer setModifier",e),this.Viewer.setModifier(e)},this.setModifier=function(){this.queue(this._setModifier,arguments)},this.setItemCache||(this.setItemCache=function(e){}),this.applyItemCache||(this.applyItemCache=function(e){}),this.Container&&(this.Container.component.innerContainer.addEventListener("touchend",function(){document.body.style.overflow="auto"}),this.Container.component.innerContainer.addEventListener("touchstart",function(){o.Viewer.getCapabilityState().hasCapability(s7sdk.ZoomCapabilityState.ZOOM_RESET)&&(document.body.style.overflow="hidden")})),this.params.addEventListener(s7sdk.Event.SDK_READY,function(e){if(s7sdk.Logger.traceLevel>=s7sdk.Logger.CONFIG&&console.log("viewer-prototype.SDKReady",o.sdk_ready),!o.sdk_ready){o.sdk_ready=!0;var t=s.split(".");o.ViewerWrapper=new s7sdk.common.Container(o.Container.getInnerContainerId(),o.params,o.Container.getInnerContainerId()+"-"+i+"-wrapper"),o.Viewer||(o.Viewer=new s7sdk[t[0]][t[1]](o.ViewerWrapper.getInnerContainerId(),o.params,o.ViewerWrapper.getInnerContainerId()+"-"+i)),o.ViewerWrapper.component.obj.className+=" "+i+"-ViewerWrapper",o.Viewer.hide=function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("Hiding the ViewerWrapper from the prototype",o,this),o.ViewerWrapper.setCSS(i+"-ViewerWrapper","display","none")},o.Viewer.show=function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("Showing the ViewerWrapper from the prototype",o,this),o.ViewerWrapper.setCSS(i+"-ViewerWrapper","display","block")},o.ControlBar=new s7sdk.common.ControlBar(o.ViewerWrapper.getInnerContainerId(),o.params,o.Viewer.getId()+"-control-bar"),o.ControlBar.component.obj.className+=" "+i,o.ControlBar.attachView(o.Viewer,!1),o.ControlBar.hide=function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("Hiding the ControlBar from the prototype"),this.setCSS(".s7controlbar","display","none")},o.ControlBar.show=function(){s7sdk.Logger.traceLevel>=s7sdk.Logger.FINE&&console.log("Showing the ControlBar from the prototype"),this.setCSS(".s7controlbar","display","block")},o.ControlBar.FullScreenButton=new s7sdk.common.FullScreenButton(o.ControlBar.getId(),o.params,o.ControlBar.getId()+"-fullScreenBtn"),o.ControlBar.setModifier(o.config.getConfig().Viewer[i].ControlBar.modifiers),o.init(),o.emptyQueue()}},!1),this.params.init(),this}});
//# sourceMappingURL=../../../../maps/js/wcs/view/vfdp-s7-viewer/viewer-prototype.hash-eae71becee4b9c54d84b0e83ae820b58.js.map