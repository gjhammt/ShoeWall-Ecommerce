define(["jquery","wcs.product-views","domReady","wcs.utils","wcs.net","wcs.alert","shared.main.plugins","shared.main.screen","datalayer.wcs.video-player-events","wcs.product-context","foundation.core","foundation.reveal","shared.lazyload","shared.wheretogetit","promise!wcs.lang-msg","coremetrics.wcs.product-detail","molecules.mol-media-gallery","molecules.mol-accordion","datalayer.wcs.product-form"],function(c,l,e,d,n,t,p,o,u){var m=!1,f=function(){m&&console.log("toggleProductDetailsDrawerAccordion");var e={open:function(e){var t=c(e);t.parent().siblings(".accordion-drawer-content").slideToggle("slow"),t.parent().parent().toggleClass("collapsed")},enableClicking:function(){c(".accordion-close-btn-js").on("click",function(){f.open(this)})}};return e}(),r=function(){m&&console.log("toggleProductFeature");var e={open:function(e){c(e).closest("ul.feature .product-feature-js").find(".show-more-separator, .show-more, .flex-video").fadeToggle()},enableClicking:function(){c(".product-feature-button-js").on("click",function(){r.open(this)})}};return e}(),a=function(){m&&console.log("toggleProductFeatures");var e={open:function(e){c(e).closest("ul.feature").find(".more-features-js").slideToggle("slow",function(){c(".show-more-features-js").fadeOut()})},enableClicking:function(){c(".show-more-features-js").on("click",function(){a.open(this)})}};return e}();function g(){m&&console.log("openDetailsDrawer"),c(".product-details-drawer-js").show(),function(e){m&&console.log("toggleText");var t=e.data("alt-text");e.data("alt-text",e.text()).text(t)}(c(".product-details-drawer-button-js"))}function v(e){var t=c(".shipping-popup");t.addClass("medium"),t.foundation("open")}function h(e){var t=c(e.target).closest(".delivery-information").data("targetAccordion"),o=c("#"+t);o&&(o.hasClass("mol-accordion--collapsed")&&o.find(".mol-accordion__header").trigger("click"),c("html, body").animate({scrollTop:o.offset().top-o.outerWidth()},500))}function w(e){e.preventDefault();var t=c(this).attr("href"),o=c(".product-info-title-js").text();window.open(t,o,"width=1040,height=680,resizable=yes,scrollbars=yes,location=no,status=no,menubar=no")}function C(){var o=c(this).find(".notify-me-form");o.on("submit",function(e){if(e.preventDefault(),o.valid()){var t=o.find("#notify-me-SIZE");c.pubsub("publish","WCS.PRODUCTFORM.EVENT.NOTIFYME.SUBMIT",[t.val()]),n.submitForm(".notify-me-form-js").done(function(e){c("#notify-me-modal").foundation("close"),c(".notify-me-response-js").removeClass("error").addClass("message success").html(e.message)}).fail(function(e,t){c("#notify-me-modal").foundation("close"),c(".notify-me-response-js").removeClass("success").addClass("message error").html(LANG_MSG.GENERIC_ERROR_MESSAGE)})}})}function P(e){var t=e.find(".br-sf-widget"),o=e.find(".br-found-heading");t.length?o.removeClass("hide"):o.addClass("hide")}e(function(){var e,t,o,n,r;WCS_CONFIG.PDP.pdpEnablePerformanceMarks&&performance.mark("PDP DOM ready"),m&&console.log("productDetailsDomEventBindings"),c(document).on("open.zf.reveal","#notify-me-modal",C),WCS_CONFIG.get("PDP::pdpDeliveryInformationOpenAccordion")?c(".delivery-information a").on("click",h):c(".delivery-information").on("click",v),c("body").on("click",".pr-snippet-write-first-review .pr-snippet-link, .pr-snippet-write-review .pr-snippet-link, .pr-write-review-link",w),u.track({videoElementSelector:"video.mol-video-player",event:"loadEventData",eventCategory:"PDP",eventAction:"Product Video"}),u.track({videoElementSelector:"#product-tech-container video",fullscreenElementSelector:"#product-tech-container .video-js",event:"loadEventData",eventCategory:"PDP",eventAction:"Product Feature Video"}),l.setupPDP(),l.handleContextChangePDP(),function(){m&&console.log("populateProductDetailsDrawer");var e,t=c(".drawer-description-content-list-js"),o=t.attr("data-list-content")||"",n=WCS_CONFIG.PDP.productDescriptionListDelimiter,r=o.split(n),a=0<r.length&&""!==r[0],s=c("<"+WCS_CONFIG.PDP.productDescriptionListContainerTag+">");if(a){for(i=0;i<r.length;i++)(e=c("<"+WCS_CONFIG.PDP.productDescriptionListItemTag+">")).html(r[i]),s.append(e);t.append(s).removeClass("hidden")}}(),f.enableClicking(),g(),"undefined"!=typeof OLAPIC_SETTINGS&&"true"===OLAPIC_SETTINGS.SHOW_CAROUSEL&&(e=OLAPIC_SETTINGS.CUSTOMER_ID,t=c(".product-form-js").attr("data-olapic-partnumber"),o=OLAPIC_SETTINGS.CAROUSEL_WIDGET_ID,n=document.createElement("script"),r=document.domain+document.location.pathname,n.async=!0,n.type="text/javascript",n.src=encodeURI("http://widgets.photorank.me/automator?e=olapic_specific_widget&customer_id="+e+"&url="+encodeURIComponent(r)+"&title="+encodeURIComponent(document.title)+"&widget="+o+"&tags="+t+"&tag_based="+!0+"&cat_based="+!1+"&collection="+!1),(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(n)),d.seeMoreLessToggle(c(".expand-features-js"),c(".drawer-features-container")),WCS_CONFIG.get("PDP::isBloomReachPdpEnabled")&&WCS_CONFIG.get("global::isBloomReachMoreLinkEnabled")&&d.showSearchWidgetMoreLink(),"findInStore"==d.getParamFromHash("action")&&c(".find-store-js").trigger("click");var a=c(".product-promo-excluded-message");a.text(a.text().trim());var s=c(".power-reviews-service-js");0<s.length&&s.powerReviewsService().data().powerReviewsService.initPowerReviews({fullview:null,ReviewSnippet:"power-reviews-snippet-rating",SizeFitSnippet:"pr-size-fit-snippet"});p.loadPlugins([{name:"bloomreach-product-compare",selector:".br_search_widget",initFunction:"bloomreachProductCompare",callback:P}]),WCS_CONFIG.PDP.pdpEnablePerformanceMarks&&performance.mark("PDP Init Done")})});
//# sourceMappingURL=../../maps/js/wcs/product-detail.hash-f3fdc634b0993b0d92e1bc591dbee35b.js.map