define(["jquery","pubsub","promise!wcs.zmetrics"],function(y,t){WCS_CONFIG.get("ANALYTICS::cmEnabled")&&y.pubsub("subscribe","vfdp.wcs.product_form.add_to_cart_succeeded",function(t,r){try{var e,a=y(".product-form-js").eq(r.productFormIndex),o="",d="0.00",n="",c=a.data("AddToCartForm").productId,i=a.data("AddToCartForm").catEntryId,u=a.data("AddToCartForm").productAvailability.getPartNumber(i),p=a.data("bundle-part-number"),s=a.data("seo-category"),m=0!==a.closest(".quickview-box-js").length,l=m?y(".product-listing-js").data("category-identifier"):"",f=a.data("master-category-identifier"),b=a.data("breadcrumb");if(0<a.parents(".bundle-product-info-js").length?(o=a.parents(".bundle-product-info-js").find(".product-info-js").text(),d=a.find(".product-price-amount-js").data("amount")):(o=y("#product-info .product-info-js").text(),0<y("#product-info .product-price-amount-js").length?e=y("#product-info .product-price-amount-js"):0<y("#product-form .product-price-amount-js").length&&(e=y("#product-form .product-price-amount-js")),e&&(d=e.data("amount"))),0<a.find(".attr-color-js").length){var g=a.find(".attr-color-js .attr-primary-name-js .attr-primary-name-label").clone();g.find(".step-number").remove(),n+=(g.text()+": "+a.find(".attr-color-js .attr-primary-name-js .attribute-label-value-js").text()).replace(/\t|\n|\r/g,"")}a.find(".step-container.attribute-value-selected:not(.attr-color)").each(function(){var t=y(this).find(".attr-primary-name-js").clone();t.find(".step-number").remove();var r=t.text().replace(/\t|\n|\r/g,""),e=y(this).find(".attr-input-js[name='attrValue']").val();n+=(0<n.length?" / ":"")+r+": "+e}),n=n.replace(/[ ]+/g," ");var j={currency:y("meta[property='og:price:currency']").attr("content"),productName:o,productId:a.find('input[name="productCode"]').val(),unitPrice:d,definingAttributes:y.trim(n),quantity:a.find(".quantity-js").val(),categoryId:l||"",masterCategoryId:f||"",childPartNumber:u||"",parentProductId:c||"",childProductId:i||"",bundlePartNumber:p||"",seoCategory:s||"",isQuickView:m,isSearch:m&&"search"===l,productOrigination:b};zm.trackAddedItem(j),WCS_CONFIG.get("global::bloomReachEnabled")&&"undefined"!=typeof BrTrk&&BrTrk.getTracker().logEvent("cart","click-add",{prod_id:a.find('input[name="productCode"]').val(),sku:u||""})}catch(t){console.error("Failed push to coremetrics",t)}})});
//# sourceMappingURL=../../../maps/js/metrics/coremetrics/wcs.product-form.hash-1c6e4afc930112094363fa1b01be152c.js.map