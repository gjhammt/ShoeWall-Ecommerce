define(["require","jquery","shared.main.plugins","foundation.util.keyboard"],function(a,i,n){return{init:function(){return this.events(),this},events:function(){i(document).on("open.zf.reveal",this.onModalOpened.bind(this))},onModalOpened:function(n){var e=this,t=i(n.target);t.find("[data-close]").length<1&&e.addCloseButton(t).done(function(){Foundation.Keyboard.releaseFocus(t),Foundation.Keyboard.trapFocus(t)}),(n.currentTarget.hasOwnProperty("Logon")||n.currentTarget.hasOwnProperty("registrationform")||n.currentTarget.hasOwnProperty("nonMemberUpgradeForm"))&&e.initSignIn(t),0<i(n.target).find("#loyalty-container").length&&e.initLoyalty()},addCloseButton:function(n){var e=i.Deferred(),t=this,o=i('<button class="close-button" data-close type="button"><span aria-hidden="true" class="icon-close"></span></button>');return t.closeLabel?(o.attr("aria-label",t.closeLabel),n.prepend(o),e.resolve()):a(["promise!wcs.lang-msg"],function(){t.closeLabel=window.LANG_MSG["MODAL.LABELS.CLOSE"],t.closeLabel||(t.closeLabel=""),o.attr("aria-label",t.closeLabel),n.prepend(o),e.resolve()}),e},initSignIn:function(e){a(["wcs.logon-register-view"],function(n){e.LogonRegisterView()})},initLoyalty:function(){n.loadPlugins({name:"wcs.loyalty-program",selector:"#loyalty-container",initFunction:"init"})}}.init()});
//# sourceMappingURL=../../maps/js/vfdp/reveal.hash-5dec1851527f66e05ea92e01a1034347.js.map