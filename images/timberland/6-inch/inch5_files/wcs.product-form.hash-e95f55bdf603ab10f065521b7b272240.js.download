define(["jquery","pubsub"],function(w,t){function d(t,e,r){var o={event:r,ecommerce:{currencyCode:e.currencyCode?e.currencyCode:null,currencySymbol:e.currencySymbol?e.currencySymbol:null}},a={products:[{name:t.productName,id:t.productId,bundleID:t.bundleId?t.bundleId:null,productID:t.productId?t.productId:null,itemID:t.itemId?t.itemId:null,vn:t.itemId?t.itemId:null,price:parseFloat(t.unitPrice),brand:"",category:t.categoryId?t.categoryId:"Misc",variant:w.trim(t.definingAttributes)?w.trim(t.definingAttributes):"",quantity:t.quantity?t.quantity:1,styleCode:t.atcProduct.styleCode||t.productId||null,colorCode:t.atcProduct.colorCode||null,colorDescription:t.atcProduct.colorDescription||null,size:t.atcProduct.size||t.definingAttributes.split(":").pop().trim()||""}]};"addToCart"===r||"buyNowClick"===r?(o.ecommerce.add=a,o.atcProduct=t.atcProduct):"productDetailViewUpdated"===r?o.ecommerce.detail=a:o.ecommerce[r]=a;try{window.dataLayer.push(o)}catch(t){console.error("Failed push to dataLayer",t)}}function r(t){var e,r=w(".product-form-js").eq(t.productFormIndex),o=(w("meta[property='og:price:currency']").attr("content"),r.find(".attr-color-js:not(.hide) .color-swatches-js .attr-box.selected .color-swatch-button-content").data("productData")),a=r.data("product-part-number"),c="",d="0.00",n="",i=r.find("input[name=catEntryId]").val(),u=r.data("child-catentry-id"),s=r.data("child-part-number"),l=r.data("bundle-part-number").toString(),p=r.data("seo-category"),b=0!==r.closest(".quickview-box-js").length,y=r.data("breadcrumb"),m=(b&&w(".product-listing-js").data("category-identifier"),r.data("master-category-identifier")),f=r.find(".quantity-js").val(),h={sku:a,name:c,category:m||"Misc",price:parseFloat(d),vn:s||"",parentId:i||"",childId:u||"",bundlePartNumber:l||"",productOrigination:y||"search",seoCategory:p||"",styleCode:"true"===o.analyticsStyleColorCodeCheckEnabled?s.split(":")[1]:o.styleCode,colorCode:"true"===o.analyticsStyleColorCodeCheckEnabled?s.split(":")[2]:o.colorCode,colorDescription:o.colorDescription,size:r.find(".attr-size:not(.hide) .product-content-form-size-btn-label.selected").data("attributeValue")||r.find("#attr-size:not(.hide).product-content-form-size-step-attr-size :selected").data("attributeValue")||"One Size"},C=r.parents(".bundle-product-info-js");if(0<C.length?(c=C.find(".product-info-js").data("catentry-name-dl"),d=null===(d=C.find(".product-price-amount-js").text().match(/[0-9]+(.[0-9]+)*/g))||d.length<1?0:parseFloat(d[0])):(c=w("#product-info .product-info-js:not(.hide)").data("catentry-name-dl"),0<w("#product-info .product-price-amount-js").length?e=w("#product-info .product-price-amount-js"):0<w("#product-form .product-price-amount-js").length&&(e=w("#product-form .product-price-amount-js")),e&&(d=e.data("amount"))),0<r.find(".attr-color-js").length){var v=r.find(".attr-color-js:not(.hide) .attr-primary-name-js .attr-primary-name-label").clone();v.find(".step-number").remove(),n+=(v.text()+": "+r.find(".attr-color-js:not(.hide) .attr-primary-name-js .attribute-label-value-js").text()).replace(/\t|\n|\r/g,"")}return r.find(".step-container.attribute-value-selected:not(.attr-color)").each(function(){var t=w(this).find(".attr-primary-name-js").clone();t.find(".step-number").remove();var e=t.text().replace(/\t|\n|\r/g,""),r=w(this).find(".attr-input-js[name='attrValue']").val();n+=(0<n.length?" / ":"")+e,r&&(n+=": "+r)}),n=n.replace(/[:]+/g,":"),h.price=parseFloat(d),{productName:h.name=c,productId:a,bundleId:l,itemId:s,unitPrice:d,categoryId:m,definingAttributes:n,quantity:f,atcProduct:h}}function n(){var t,e,r;if(window.dataLayer)for(var o in window.dataLayer)if(t=(r=window.dataLayer[o]).currency,e=r.currencySymbol){e=e.replace(/&amp;/g,"&"),e=w("<textarea/>").html(e).text(),window.dataLayer[o].currencySymbol=e;break}return{currencySymbol:e,currencyCode:t}}w.pubsub("subscribe","vfdp.wcs.product_form.add_to_cart_clicked",function(){try{var t=0!==w(".product-form-js").closest(".quickview-box-js").length,e="fullpdp";!0==t&&(e="quickview"),window.dataLayer.push({event:"addToCartClick",clickSource:e})}catch(t){console.error("Failed push to dataLayer",t)}}),w.pubsub("subscribe","vfdp.wcs.product_form.add_to_cart_succeeded",function(t,e){d(r(e),n(),"addToCart")}),w.pubsub("subscribe","vfdp.wcs.product_form.add_to_wishlist_succeeded",function(t,e){d(r(e),n(),"addToWishlist")}),w.pubsub("subscribe","vfdp.wcs.product_form.add_to_favorites_succeeded",function(t,e){d(r(e),n(),"addToFavorites")}),w.pubsub("subscribe","vfdp.wcs.product_form_cart.add_to_wishlist_succeeded",function(t,e){var r,o,a=n(),c=(o={styleCode:(r=e).styleCode,colorCode:r.colorCode,colorDescription:r.colorDescription,size:r.size},r.atcProduct=o,r);!0===WCS_CONFIG.get("global::favoritesEnabled")?d(c,a,"addToFavorites"):d(c,a,"addToWishlist")}),w.pubsub("subscribe","product-form.attr.context.changed",function(t,e){d(r(e),n(),"productDetailViewUpdated")}),w.pubsub("subscribe","vfdp.wcs.product_form.buy_now_clicked",function(t,e){d(r(e),n(),"buyNowClick")}),w.pubsub("subscribe","WCS.PRODUCTFORM.EVENT.NOTIFYME.ACTIVE",function(t,e){try{window.dataLayer.push({event:"eventFired",eventAttributes:{type:"userEvent",category:"buttons",action:"click",label:"notifyMe:request"}})}catch(t){console.error("Failed push to dataLayer",t)}}),w.pubsub("subscribe","WCS.PRODUCTFORM.EVENT.NOTIFYME.SIGNUP.SUCCESS",function(t,e){try{window.dataLayer.push({event:"notifyMeSignUpSuccess"})}catch(t){console.error("Failed push to dataLayer",t)}}),w.pubsub("subscribe","WCS.PRODUCTFORM.EVENT.NOTIFYME.SUBMIT",function(t,e){try{window.dataLayer.push({event:"notifyMeSignUpSuccess",ecommerce:{detail:{products:[{notifyForSize:e.join("-")}]}}})}catch(t){console.error("Failed push to dataLayer",t)}}),w.pubsub("subscribe","WCS.PRODUCTFORM.EVENT.ONLINEDEALER.ACTIVE",function(t,e){try{window.dataLayer.push({event:"buyFromDealerClicked"})}catch(t){console.error("Failed push to dataLayer",t)}})});
//# sourceMappingURL=../../../maps/js/metrics/datalayer/wcs.product-form.hash-f3ebfe3f234f5bbaf3eee437ce6158a4.js.map