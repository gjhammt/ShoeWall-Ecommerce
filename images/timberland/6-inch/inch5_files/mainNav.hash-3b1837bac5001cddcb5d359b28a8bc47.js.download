define(["jquery","pubsub","shared.main.screen"],function(r,e,t){var i;return(i={defaults:{el:".topnav-mainnav",dataAttr:"mainnav-options",moreSelector:"> li.more",moreMenuSelector:".topnav-mainnav-more-menu",menuItemsSelector:"> li:not(.more)",utilityNav:".topnav-utility",hideTextClass:"hide-text",excludeBreakpoints:["small"],hasChildrenClassName:"has-children"},init:function(){var e=this;return e.deferred=r.Deferred(),e.$element=r(e.defaults.el),e.metadata=e.$element.data(e.defaults.dataAttr),e.config=r.extend({},e.defaults,e.metadata),e.$moreL1=r(e.config.moreSelector,e.$element),e.$moreMenu=r(e.config.moreMenuSelector,e.$element),e.$utilityNav=r(e.config.utilityNav),e.events(),"large"===e._getScreenSize()&&e.updateUtilityDisplay(),e.deferred.resolve(),e},getMoreLinkWidth:function(){var e,t=this.$moreL1;return t.hasClass("hide")?(t.css("left","-900000px").removeClass("hide"),e=t.outerWidth(!0),t.css("left","").addClass("hide")):e=t.outerWidth(!0),e},getAvailableSpace:function(){var e=this;return e.$element.outerWidth()-((parseInt(e.$element.css("border-left-width"))||0)+(parseInt(e.$element.css("border-right-width"))||0))-(parseInt(e.$element.css("padding-left"))+parseInt(e.$element.css("padding-right")))-(parseInt(e.$element.css("margin-left"))+parseInt(e.$element.css("margin-right")))-e.getMoreLinkWidth()},getNecessarySpace:function(){var t=0;return r(this.config.menuItemsSelector,this.$element).each(function(){var e=r(this).data("width");t+=e||r(this).outerWidth(!0)}),t},_getFirstMoreElement:function(){return r("li",this.$moreMenu).first()},_getLastMainElement:function(){return r(this.config.menuItemsSelector,this.$element).last()},_getScreenSize:function(){return t.size()},getUtilityNavSize:function(){var e=this;if("large"===e._getScreenSize()){var t=0;e.$utilityNav.find("li:visible").each(function(){t+=r(this).outerWidth(!0)}),t+=parseInt(e.$utilityNav.css("padding-right")),t+=parseInt(e.$utilityNav.css("padding-left")),e.utilityNavSize={height:e.$utilityNav.outerHeight(!0),width:t},e.logoSize={height:r(".topnav-logo").outerHeight(),width:r(".topnav-logo").outerWidth()},e.topnavHeight=r(".topnav-header").outerHeight(!0)}},updateUtilityDisplay:function(){var e=this,t=r(window).width();e.utilityNavSize||e.getUtilityNavSize(),e.logoSize&&e.utilityNavSize&&e.logoSize.height>e.topnavHeight-e.utilityNavSize.height&&(t-=e.logoSize.width),"large"===e._getScreenSize()&&t<e.utilityNavSize.width?e.$utilityNav.addClass(e.config.hideTextClass):e.$utilityNav.removeClass(e.config.hideTextClass)},updateMainMenuItems:function(e){var t,i,n=this,a=n.getNecessarySpace(),s=n.getAvailableSpace();e=e||n._getScreenSize(),0<=n.config.excludeBreakpoints.indexOf(e)?0<(i=n._getFirstMoreElement()).length&&(n.insertIntoMainMenu(i),n.updateMainMenuItems(e)):s<a?0<(t=n._getLastMainElement()).length&&(t.attr("data-width",t.outerWidth(!0)),n.insertIntoMoreMenu(t),n.updateMainMenuItems(e)):a+(i=n._getFirstMoreElement()).data("width")<s&&(n.insertIntoMainMenu(i),n.updateMainMenuItems(e)),n.toggleMoreMenu(),r.pubsub("publish","vfdp.aem.topnav.moreMenu.updated")},insertIntoMoreMenu:function(e){e.prependTo(this.$moreMenu),e.hasClass("topnav-list")?r.pubsub("publish","vfdp.aem.topnav.moreMenu.add.list",e):r.pubsub("publish","vfdp.aem.topnav.moreMenu.add.dropdown",e)},insertIntoMainMenu:function(e){e.insertBefore(this.$moreL1),e.hasClass("topnav-list")?r.pubsub("publish","vfdp.aem.topnav.moreMenu.remove.list",e):r.pubsub("publish","vfdp.aem.topnav.moreMenu.remove.dropdown",e)},toggleMoreMenu:function(){var e=this;0<r("li",e.$moreMenu).length?e.$moreL1.removeClass("hide").addClass(e.config.hasChildrenClassName):e.$moreL1.addClass("hide").removeClass(e.config.hasChildrenClassName)},events:function(){var n=this;r.pubsub("subscribe","window.resize",function(e,t){var i=t?t.now:void 0;"large"!==i||n.utilityNavSize||n.getUtilityNavSize(),n.updateUtilityDisplay(),n.updateMainMenuItems(i)}),r.pubsub("subscribe","vfdp.aem.topnav.dropdown.loaded",function(e,t){n.updateMainMenuItems()}),r.pubsub("subscribe","vfdp.fonts.loaded",function(e,t){var i=t?t.now:void 0;n.getUtilityNavSize(),n.updateUtilityDisplay(),n.updateMainMenuItems(i)}),r.pubsub("subscribe","vfdp.topnav.sticky",function(e,t){var i=t?t.now:void 0;n.updateMainMenuItems(i)})}}).init(),i});
//# sourceMappingURL=../../../maps/js/cms/nav/mainNav.hash-767d696b11976753f233022ebe752d59.js.map