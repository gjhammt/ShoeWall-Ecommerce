define(["jquery","wcs.utils"],function(r,i){var n={playedPercentEventMarks:[10,25,50,75,100]};function a(e,n,t,r){return{event:n.event,eventCategory:n.eventCategory,eventAction:n.eventAction,eventLabel:e,videoSource:r[0].currentSrc,videoPoster:r[0].poster,nonInteractive:!t}}return{track:function(e){var t=r.extend({},n,e);WCS_CONFIG.get("ANALYTICS::gtmEnabled")&&WCS_CONFIG.get("PDP::onsiteVideoEngagementTrackingEnabled")&&r(t.videoElementSelector).each(function(e){var n=r(this);!function(t,r){var o=r.playedPercentEventMarks.slice();function e(){window.dataLayer.push(a("Video download",r,!1,t.$videoElement))}t.$videoElement.on("play",function(){window.dataLayer.push(a("Start Playing",r,!0,t.$videoElement)),0===o.length&&(o=r.playedPercentEventMarks.slice())}),t.$videoElement.on("pause",function(e){e.currentTarget.currentTime!==e.currentTarget.duration&&window.dataLayer.push(a("Pause",r,!0,t.$videoElement))}),t.$fullscreenElement.on("webkitfullscreenchange mozfullscreenchange fullscreenchange",function(){var e=i.getFullscreenElement()?"Full Screen On":"Full Screen Off";window.dataLayer.push(a(e,r,!0,t.$videoElement))}),t.$videoElement.on("enterpictureinpicture",function(){window.dataLayer.push(a("Picture in Picture Mode On",r,!0,t.$videoElement))}),0<i.getVideoBufferedTime(t.$videoElement[0])?e():t.$videoElement.one("loadeddata",e);t.$videoElement.on("timeupdate",function(){for(var e=Math.round(t.$videoElement[0].currentTime/t.$videoElement[0].duration*100);o.length&&o[0]<=e;){var n="Reached "+o.shift()+"%";window.dataLayer.push(a(n,r,!1,t.$videoElement))}})}({idx:e,$videoElement:n,$fullscreenElement:t.fullscreenElementSelector?r(t.fullscreenElementSelector).eq(e):n},t)})}}});
//# sourceMappingURL=../../../maps/js/metrics/datalayer/wcs.video-player-events.hash-a0113d8ed40ec4ccece99fe3de3e3746.js.map