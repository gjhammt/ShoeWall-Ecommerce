define(["jquery","pubsub","shared.main.screen","shared.lazyload","foundation.util.keyboard"],function(o,e,n,a){var t;return(t={defaults:{el:".topnav-menubutton",dataAttr:"menu-button-options",menuButton:".topnav-menubutton a",menuIcon:".topnav-menubutton-icon",menuText:".topnav-menubutton-text",topnav:".topnav",topnavHeader:".topnav-header",topnavHeaderScreen:".topnav-header-screen",accordion:".topnav-accordion",searchButton:".topnav-searchbutton",searchContainer:".topnav-search-container",accordionSearchClass:"topnav-accordion-search",searchMenuClass:"topnav-menu-search",speed:250,easing:"swing",lazyLoadImages:"picture.lazy-load"},init:function(){var e=this;return e.deferred=o.Deferred(),e.$element=o(e.defaults.el),e.$body=o("body"),e.metadata=e.$element.data(e.defaults.dataAttr),e.config=o.extend({},e.defaults,e.metadata),e.$accordion=o(e.config.accordion),e.accordionMenuWidth=e.$accordion.data("mobile-menu-width"),e.$menuButton=o(e.config.menuButton),e.$menuButtonAriaOpen=o(e.$menuButton).attr("aria-label"),e.$menuButtonAriaClose=o(e.$menuButton).data("closeAriaLabel"),e.$menuIcon=o(e.config.menuIcon),e.$menuText=o(e.config.menuText),e.$topnav=o(e.config.topnav),e.$topnavHeader=o(e.config.topnavHeader),e.$topnavHeaderScreen=o(e.config.topnavHeaderScreen),e.$searchButton=o(e.config.searchButton),e.$searchContainer=o(e.config.searchContainer),e.enableSearch=e.$accordion.hasClass(e.config.accordionSearchClass),e.enablePeekABooFeature=e.$accordion.closest("header").hasClass("peek-a-boo-menu"),e.$accordion.removeClass("collapse"),this.events(),e.configureAriaTags(),e.deferred.resolve(),e},events:function(){var n=this;n.$menuButton.on("click touch",function(e){e.preventDefault(),o(n.config.topnavHeader).find(".media").not(".hide-for-small-only").find(n.config.lazyLoadImages).lazyload(),n.toggleMobileNav(n.$accordion),n.enablePeekABooFeature&&(n.$body.toggleClass("peek-a-boo-enabled"),n.$accordion.css({width:n.accordionMenuWidth+"%"})),0!==o(window).scrollTop()&&window.scrollTo(0,0)}),n.$topnavHeaderScreen.on("click touch",function(e){e.preventDefault(),n.$body.css({overflow:""}),n.hideNavigation()}),o.pubsub("subscribe","window.resize.breakpoint",function(e,a){"small"!==a.now&&n.hideNavigation(),n.configureAriaTags(),n.enablePeekABooFeature&&(n.$body.removeClass("peek-a-boo-enabled"),n.$accordion.css({width:""}))}),o.pubsub("subscribe","vfdp.aem.topnav.search.open",function(e,a){n.hideNavigation()})},configureAriaTags:function(){"small"!==n.size()?this.$accordion.removeAttr("aria-labelledby"):this.$accordion.attr({"aria-labelledby":"topnav-menu-button"})},toggleMobileNav:function(e){var a=this;"small"===n.size()&&0!=e[0].offsetHeight?a.hideNavigation():a.showNavigation()},hideNavigation:function(){var e=this;e.lastFocusableMenuItem&&e.lastFocusableMenuItem.length&&e.lastFocusableMenuItem.off("focusout.from.last.menu.item"),e.$accordion.hasClass("scrolled")||("small"===n.size()&&e.$topnav.hasClass("active")?e.$accordion.animate({height:0},{duration:e.config.speed,easing:e.config.easing,complete:function(){e.$accordion.css({display:"none"}),e.$topnav.removeClass("active"),e.$accordion.css({height:"",display:""}),e.$accordion.removeClass("active"),e.enableSearch&&e.hideSearchContainer(),o.pubsub("publish","vfdp.aem.topnav.accordion.close")}}):"small"!==n.size()&&(e.$topnav.removeClass("active"),e.$accordion.css({height:"",display:""}).removeClass("active"),e.enableSearch&&e.hideSearchContainer(),o.pubsub("publish","vfdp.aem.topnav.accordion.close")),e.$menuIcon.removeClass("icon-close").addClass("icon-menu"),e.$menuButton.attr({"aria-expanded":"false"}),e.$menuButton.attr({"aria-label":e.$menuButtonAriaOpen}),e.$menuText.length&&e.$menuText.text(e.config.textClosed),o(document).off("scroll",e.mobileNavigationScrollEvents))},showNavigation:function(){var e,a=this;o.pubsub("publish","vfdp.aem.topnav.accordion.open"),a.$topnav.addClass("active"),a.enableSearch&&a.showSearchContainer(),e=a.$accordion.outerHeight(),a.$accordion.css({height:0}),a.$accordion.animate({height:e},{duration:a.config.speed,easing:a.config.easing,complete:function(){a.$accordion.height("")}}),a.$menuIcon.removeClass("icon-menu").addClass("icon-close"),a.$menuButton.attr({"aria-expanded":"true"}),a.$menuButton.attr({"aria-label":a.$menuButtonAriaClose}),a.$menuText.length&&a.$menuText.text(a.config.textOpened);var n=Foundation.Keyboard.findFocusable(a.$accordion);a.lastFocusableMenuItem=n.last(),a.lastFocusableMenuItem.on("focusout.from.last.menu.item",function(){a.$menuButton.focus()}),o(document).on("scroll",a,a.mobileNavigationScrollEvents)},showSearchContainer:function(){this.$searchContainer.addClass("active "+this.config.searchMenuClass)},hideSearchContainer:function(){var e=this;e.$searchContainer.removeClass(e.config.searchMenuClass),e.$searchButton.hasClass("active")||e.$searchContainer.removeClass("active")},mobileNavigationScrollEvents:function(e){var a=e.data;o(window).scrollTop()>a.$accordion.offset().top+a.$accordion.height()?(a.$menuIcon.hasClass("icon-close")&&(a.$accordion.addClass("scrolled"),a.$menuIcon.removeClass("icon-close").addClass("icon-menu")),a.enableSearch&&a.$searchContainer.removeClass("active"),a.$menuText.length&&a.$menuText.text(a.config.textClosed)):(a.$topnav.hasClass("active")&&(a.$accordion.removeClass("scrolled"),a.$menuIcon.removeClass("icon-menu").addClass("icon-close")),a.enableSearch&&a.$searchContainer.addClass("active"),a.$menuText.length&&a.$menuText.text(a.config.textOpened))}}).init(),t});
//# sourceMappingURL=../../../maps/js/cms/nav/menuButton.hash-a5b9ba7008ea2632b38f9eb669266f06.js.map